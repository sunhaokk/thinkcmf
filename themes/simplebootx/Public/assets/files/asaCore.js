var MSISServerAddress=Mapabc_search_address[0];if(typeof IsNum=="undefined")var IsNum=function(a){if(a!=null&&a!="")return!isNaN(a);return false};if(typeof MPoint=="undefined"){MPoint=function(a,d){this.x=a;this.y=d};MPoint.prototype.x=0;MPoint.prototype.y=0}if(typeof MSize=="undefined"){var MSize=function(a,d){this.width=a;this.height=d;if(!a||!IsNum(a))this.width=0;if(!d||!IsNum(d))this.height=0};MSize.prototype.height=null;MSize.prototype.width=null}
if(typeof MLngLat=="undefined"){MLngLat=function(a,d,b){this.lngX=a;this.latY=d;if(b==2||b==1){this.lngX=parseFloat(a);this.latY=parseFloat(d)}if(a instanceof Object)this.lngX=null;if(d instanceof Object)this.latY=null;if(b!=undefined)this.TYPE=b};MLngLat.prototype.lngX=null;MLngLat.prototype.latY=null;MLngLat.prototype.TYPE=0}if(typeof MLngLats=="undefined"){MLngLats=function(a){this.lnglatArr=a};MLngLats.prototype.lnglatArr=null}
if(typeof MLngLatBounds=="undefined"){MLngLatBounds=function(a,d){this.southWest=a;this.northEast=d};MLngLatBounds.prototype.southWest=null;MLngLatBounds.prototype.northEast=null;MLngLatBounds.prototype.getSouthWest=function(){return this.southWest};MLngLatBounds.prototype.getNorthEast=function(){return this.northEast}}
if(typeof MSISCheckError=="undefined"){MSISCheckError=function(){};MSISCheckError.judgeParameter=function(a,d,b,c,e){var f=a,g=true;if(MSISCheckError.isFigure(f))if(d!="number"&&a!=null&&a!=undefined)f=a.replace(/^\s+|\s+$/g,"");var h=a==null||a==undefined||f=="";if(typeof f=="number")h=false;if(g&&h&&1&e){MSISCheckError.retrunMessage("400",b+"\u53c2\u6570\u4e3a\u7a7a",c);return false}if(g&&!h&&a.length>64&&2&e){MSISCheckError.retrunMessage("400",b+"\u53c2\u6570\u957f\u5ea6\u8d85\u8fc7\u8303\u56f4",
c);return false}if(typeof f!=d){MSISCheckError.retrunMessage("400",b+"\u53c2\u6570\u9519\u8bef",c);return false}return true};MSISCheckError.retrunMessage=function(a,d,b){var c={};c.error_id=a;c.error_message=d;b.call(b,c)};MSISCheckError.isFigure=function(a){var d=/^[0-9]\d*[.]{1}[0-9]\d*$/;return/^[0-9]\d*$/.test(a)?false:d.test(a)?false:true};MSISCheckError.judgeMLngLat=function(a,d,b){if(a)if((a instanceof MLngLat||a.latY&&a.lngX)==false){MSISCheckError.retrunMessage("400",b+"\u53c2\u6570\u4e0d\u662fMLngLat\u7c7b\u578b",
d);return true}else if((a instanceof MLngLat||a.latY&&a.lngX)==undefined){MSISCheckError.retrunMessage("400",b+"\u53c2\u6570\u4e0d\u662fMLngLat\u7c7b\u578b",d);return true}else return false;MSISCheckError.retrunMessage("400",b+"\u53c2\u6570\u4e0d\u662fMLngLat\u7c7b\u578b",d);return true};MSISCheckError.judgeMLngLats=function(a,d,b){if(a)if((a instanceof MLngLats||a.lnglatArr)==false||(a instanceof MLngLats||a.lnglatArr)==undefined){MSISCheckError.retrunMessage("400",b+"\u53c2\u6570\u4e0d\u662fMLngLats\u7c7b\u578b",
d);return true}else return false;MSISCheckError.retrunMessage("400",b+"\u53c2\u6570\u4e0d\u662fMLngLats\u7c7b\u578b",d);return true};MSISCheckError.judgeMLngLatAndMLngLats=function(a,d,b){if(a)if((a instanceof MLngLats||a instanceof MLngLat||a.latY&&a.lngX||a.lnglatArr)==false||(a instanceof MLngLats||a instanceof MLngLat||a.latY&&a.lngX||a.lnglatArr)==undefined){MSISCheckError.retrunMessage("400",b+"\u53c2\u6570\u4e0d\u662fMLngLat\u6216MLngLats\u7c7b\u578b",d);return true}else return false;MSISCheckError.retrunMessage("400",
b+"\u53c2\u6570\u4e0d\u662fMLngLat\u6216MLngLats\u7c7b\u578b",d);return true};MSISCheckError.misjudgment=function(a,d){if(d=="number"&&!MSISCheckError.isnumber(a))return false;if(d=="string"&&MSISCheckError.isFigure(a))if(!MSISCheckError.ifSpecialCharacter(a))return false;return true};MSISCheckError.ifSpecialCharacter=function(a){for(var d=true,b=new Array("\u3010","\u3011"),c=0;c<b.length;c++)if(a.indexOf(b[c])!=-1)d=false;return d};MSISCheckError.isnumber=function(a){return/^[0-9]\d*$/.test(a)?
true:false};MSISCheckError.treatCityCodes=function(a){var d=a;if(typeof d!="string"){d=a.toString(8);d="0"+d}return d};var checkUrlLength=function(a){MSISCheckError.retrunMessage("408","URL\u957f\u5ea6\u5e94\u5c0f\u4e8e2048\u5b57\u8282\uff01",a)},checkWrong=function(a){MSISCheckError.retrunMessage("403","\u6743\u9650\u9a8c\u8bc1\u5931\u8d25",a)},isAccess=function(a){if(mValue_==1){MSISCheckError.retrunMessage("403","\u60a8\u7684key\u88ab\u5f3a\u5236\u9501\u5b9a\uff0c\u8bf7\u60a8\u4e0eMapabc\u8054\u7cfb\uff01",
a);return true}if(mValue_==2){MSISCheckError.retrunMessage("403","\u60a8\u7684api\u4f59\u989d\u4e0d\u8db3\uff0c\u8bf7\u60a8\u53ca\u65f6\u5145\u503c\uff01",a);return true}if(mValue_==3){MSISCheckError.retrunMessage("403","\u60a8\u7684api\u5df2\u7ecf\u5230\u671f\uff0c\u8bf7\u60a8\u4e0eMapabc\u8054\u7cfb\uff01",a);return true}if(mValue_==4){MSISCheckError.retrunMessage("403","KEY\u5b58\u5728,\u4f46\u662fURL\u9519\u8bef",a);return true}if(mValue_==5){MSISCheckError.retrunMessage("403","KEY\u4e0d\u5b58\u5728\uff08\u6ca1\u7533\u8bf7\u6216\u88ab\u6ce8\u9500\uff09",
a);return true}if(mValue_==6){MSISCheckError.retrunMessage("403","\u9a8c\u8bc1\u5931\u8d25,\u8bf7\u60a8\u4e0eMapabc\u8054\u7cfb",a);return true}return false}}function isIE(){return navigator.appName=="Microsoft Internet Explorer"?true:false}
function createSimpleNode(a,d,b,c){if(navigator.appName=="Microsoft Internet Explorer"){c=c.createElement(a.toString());if(d.toString()!="")c.text=d.toString();b.appendChild(c);return b}else{a=c.createElement(a.toString());d=c.createTextNode(d.toString());a.appendChild(d);b.appendChild(a)}}
function createComplexNode(a,d,b,c,e){if(navigator.appName=="Microsoft Internet Explorer"){var f=e.createNode(1,"spatial_geos",""),g=e.createNode(1,"spatial_geo",""),h=e.createAttribute("type"),i;if(a=="rectangle"||a=="Rectangle"||a=="rect"||a=="Rect"){h.value="Rectangle";g.setAttributeNode(h);i=e.createElement("bounds");if(d=="")d=null;else i.text=d;g.appendChild(i)}if(a=="polygon"||a=="Polygon"){h.value="Polygon";g.setAttributeNode(h);i=e.createElement("coor");if(d=="")d=null;else i.text=d;g.appendChild(i)}if(a==
"circle"||a=="Circle"){h.value="Circle";g.setAttributeNode(h);i=e.createElement("bounds");if(d=="")d=null;else i.text=d;g.appendChild(i)}if(a=="ellipse"||a=="Ellipse"){h.value="Ellipse";g.setAttributeNode(h);i=e.createElement("bounds");if(d!="")i.text=d;g.appendChild(i)}i=e.createElement("buffer");i.text=b.toString();g.appendChild(i);f.appendChild(g);c.appendChild(f)}else{f=e.createElement("spatial_geos");c.appendChild(f);c=e.createElement("spatial_geo");f.appendChild(c);if(a=="rectangle"||a=="Rectangle"||
a=="rect"||a=="Rect"){c.setAttribute("type","Rectangle");g=e.createElement("bounds");if(d=="")d=null;else{f=e.createTextNode(d);g.appendChild(f)}c.appendChild(g)}if(a=="polygon"||a=="Polygon"){c.setAttribute("type","Polygon");g=e.createElement("coor");if(d=="")d=null;else{f=e.createTextNode(d);g.appendChild(f)}c.appendChild(g)}if(a=="circle"||a=="Circle"){c.setAttribute("type","Circle");g=e.createElement("bounds");if(d=="")d=null;else{f=e.createTextNode(d);g.appendChild(f)}c.appendChild(g)}if(a==
"ellipse"||a=="Ellipse"){c.setAttribute("type","Ellipse");a=e.createElement("bounds");if(d!=""){f=e.createTextNode(d);a.appendChild(f)}c.appendChild(a)}d=e.createElement("buffer");f=e.createTextNode(b);d.appendChild(f);c.appendChild(d)}}
function createSpecialXML(a,d,b,c,e){if(navigator.appName=="Microsoft Internet Explorer"){var f=e.createNode(1,"spatial_geos",""),g=e.createNode(1,"spatial_geo",""),h=e.createNode(1,"spatial_geo",""),i=e.createAttribute("type"),j=e.createAttribute("type");i.value="Line";j.value="Line";g.setAttributeNode(i);h.setAttributeNode(j);i=e.createElement("coor");if(a!="")i.text=a;g.appendChild(i);a=e.createElement("coor");if(d!="")a.text=d;h.appendChild(a);d=e.createElement("buffer");d.text=b.toString();e=
e.createElement("buffer");e.text=b.toString();g.appendChild(d);h.appendChild(e);f.appendChild(g);f.appendChild(h);c.appendChild(f)}else{g=e.createElement("spatial_geos");c.appendChild(g);c=e.createElement("spatial_geo");g.appendChild(c);f=e.createElement("spatial_geo");g.appendChild(f);c.setAttribute("type","Line");f.setAttribute("type","Line");g=e.createElement("coor");a=e.createTextNode(a);g.appendChild(a);a=e.createElement("coor");d=e.createTextNode(d);a.appendChild(d);c.appendChild(g);f.appendChild(a);
d=e.createElement("buffer");a=e.createTextNode(b.toString());d.appendChild(a);a=e.createElement("buffer");b=e.createTextNode(b.toString());a.appendChild(b);c.appendChild(d);f.appendChild(a)}}function parseXML(a){return(new DOMParser).parseFromString(a,"text/xml")}function nodeToString(a){return(new XMLSerializer).serializeToString(a)}MNoCheckKeyFlag&&validate();
if(typeof MConstants=="undefined"){MConstants=function(){};MConstants.DS_BASE="POI";MConstants.DS_ENPOI="DIBIAO";MConstants.DS_BASE_ENPOI="DIBIAO:10000%2BPOI";MConstants.DS_BASE_USERPOI="USERPOI:10000%2BPOI";MConstants.DS_USERPOI="USERPOI";MConstants.DS_BASE_BUS="BUS:100%2BPOI"}
if(typeof MLocalSearch=="undefined"){MLocalSearch=function(){if(MNoCheckKeyFlag){var a=MSISGetKey("asaCore.js");MSearchDummy.availabilityKey(a,false,1)}};MLocalSearch.prototype.callbackFunctionName=null;MLocalSearch.BASE="BP";MLocalSearch.USERPOI="UP";MLocalSearch.BASE_USERPOI="BU";MLocalSearch.ENPOI="EP";MLocalSearch.BASE_ENPOI="BE";MLocalSearch.BASE_BUS="BE";MLocalSearch.prototype.serverUrl=MSISServerAddress+"highLight=false&enc=utf-8&ver=2.0";MLocalSearch.prototype.setCallbackFunction=function(a){this.callbackFunctionName=
a};MLocalSearch.prototype.poiSearchByCenterXY=function(a,d,b,c){c||(c=new MLocalSearchOptions);var e=new MPoiSearch(1),f=new MPoiSearchOptions;f.recordsPerPage=c.recordsPerPage;f.pageNum=c.pageNum;f.dataType=c.dataType;f.resType=c.returnType;f.naviFlag=c.naviFlag;f.dataSources=c.dataSources;f.range=c.range;f.srcType=c.srcType;f.sr=c.sr;f.userId=c.userId;f.tempId=c.tempId;f.extId=c.extId;f.eid=c.eid;f.requestMethod=c.requestMethod;e.setCallbackFunction(this.callbackFunctionName);e.poiSearchByCenPoi(a,
d,b,f)};MLocalSearch.prototype.poiSearchByCenterKeywords=function(a,d,b,c){c||(c=new MLocalSearchOptions);var e=new MPoiSearch(1),f=new MPoiSearchOptions;f.recordsPerPage=c.recordsPerPage;f.pageNum=c.pageNum;f.dataType=c.dataType;f.resType=c.returnType;f.naviFlag=c.naviFlag;f.dataSources=c.dataSources;f.range=c.range;f.srcType=c.srcType;f.sr=c.sr;f.userId=c.userId;f.tempId=c.tempId;f.extId=c.extId;f.eid=c.eid;f.requestMethod=c.requestMethod;e.setCallbackFunction(this.callbackFunctionName);e.poiSearchByCenKeywords(a,
d,b,f)};MLocalSearch.prototype.poiSearchByKeywords=function(a,d,b){b||(b=new MLocalSearchOptions);var c=new MPoiSearch(1),e=new MPoiSearchOptions;e.recordsPerPage=b.recordsPerPage;e.pageNum=b.pageNum;e.dataType=b.dataType;e.resType=b.returnType;e.dataSources=b.dataSources;e.srcType=b.srcType;e.sr=b.sr;e.userId=b.userId;e.tempId=b.tempId;e.extId=b.extId;e.eid=b.eid;e.requestMethod=b.requestMethod;c.setCallbackFunction(this.callbackFunctionName);c.poiSearchByKeywords(a,d,e)};MLocalSearch.prototype.typeAhead=
function(a,d,b){b||(b=new MLocalSearchOptions);var c=new MPoiSearch(1),e=new MPoiSearchOptions;e.resType=b.returnType;e.requestMethod=b.requestMethod;c.setCallbackFunction(this.callbackFunctionName);c.typeAhead(a,d,e)}}
if(typeof MLocalSearchOptions=="undefined"){MLocalSearchOptions=function(){};MLocalSearchOptions.prototype.dataSources=MLocalSearch.BASE_ENPOI;MLocalSearchOptions.prototype.dataType="";MLocalSearchOptions.prototype.range=3E3;MLocalSearchOptions.prototype.extId="";MLocalSearchOptions.prototype.eid="";MLocalSearchOptions.prototype.userId="";MLocalSearchOptions.prototype.recordsPerPage=10;MLocalSearchOptions.prototype.pageNum=1;MLocalSearchOptions.prototype.sql="";MLocalSearchOptions.prototype.language=
"";MLocalSearchOptions.prototype.srcType="";MLocalSearchOptions.prototype.returnType="JSON";MLocalSearchOptions.prototype.agentId="";MLocalSearchOptions.prototype.naviFlag=0;MLocalSearchOptions.prototype.sr=0;MLocalSearchOptions.prototype.tempId="";MLocalSearchOptions.prototype.requestMethod="get"}
if(typeof MRoutSearch=="undefined"){MRoutSearch=function(){if(MNoCheckKeyFlag){var a=MSISGetKey("asaCore.js");MSearchDummy.availabilityKey(a,false,1)}};MRoutSearch.BusSearch="bus";MRoutSearch.DriveSearch="drive";MRoutSearch.prototype.BusSearch="bus";MRoutSearch.prototype.DriveSearch="drive";MRoutSearch.prototype.serverUrl=MSISServerAddress+"highLight=false&enc=utf-8&ver=2.0";MRoutSearch.prototype.callbackFunctionName=null;MRoutSearch.prototype.setCallbackFunction=function(a){this.callbackFunctionName=
a};MRoutSearch.prototype.routSearchByStartXYAndEndXY=function(a,d,b,c,e){e||(e=new MRoutSearchOptions);if(a=="drive"){c=new MRouteSearch(1);a=new MRouteSearchOptions;a.routeType=e.routeType;a.passByXY=e.passByXY;a.per=e.per;a.resType=e.returnType;a.requestMethod=e.requestMethod;c.setCallbackFunction(this.callbackFunctionName);c.routeSearchByTwoPoi(d,b,a)}else if(a=="bus"){a=new MBusSearch(1);var f=new MBusSearchOptions;f.per=e.per;f.routeType=e.routeType;f.resType=e.returnType;f.requestMethod=e.requestMethod;
a.setCallbackFunction(this.callbackFunctionName);a.busSearchByTwoPoi(d,b,c,f)}};MRoutSearch.prototype.routSearchByBusLineName=function(a,d,b){b||(b=new MRoutSearchOptions);var c=new MBusSearch(1),e=new MBusSearchOptions;e.recordsPerPage=b.recordsPerPage;e.pageNum=b.pageNum;e.resData=b.resultType;e.resType=b.returnType;e.requestMethod=b.requestMethod;c.setCallbackFunction(this.callbackFunctionName);c.busSearchByBusName(a,d,e)};MRoutSearch.prototype.routSearchByBusLineID=function(a,d,b){b||(b=new MRoutSearchOptions);
var c=new MBusSearch(1),e=new MBusSearchOptions;e.recordsPerPage=b.recordsPerPage;e.pageNum=b.pageNum;e.resData=b.resultType;e.resType=b.returnType;e.requestMethod=b.requestMethod;c.setCallbackFunction(this.callbackFunctionName);c.busSearchByBusId(a,d,e)};MRoutSearch.prototype.routSearchByBusStationName=function(a,d,b){b||(b=new MRoutSearchOptions);var c=new MBusSearch(1),e=new MBusSearchOptions;e.recordsPerPage=b.recordsPerPage;e.pageNum=b.pageNum;e.resData=b.resultType;e.resType=b.returnType;e.requestMethod=
b.requestMethod;c.setCallbackFunction(this.callbackFunctionName);c.busSearchByBusStation(a,d,e)};MRoutSearch.prototype.calculationDistance=function(a,d,b){b||(b=new MRoutSearchOptions);var c=new MSpatialSearch(1),e=new MSpatialSearchOptions;e.resType=b.returnType;e.requestMethod=b.requestMethod;c.setCallbackFunction(this.callbackFunctionName);c.calculationP2PDistance(a,d,e)};MRoutSearch.prototype.routSearchByMultiXY=function(a,d){d||(d=new MRoutSearchOptions);var b=new MRouteSearch(1),c=new MRouteSearchOptions;
c.routeType=d.routeType;c.per=d.per;c.resType=d.returnType;c.requestMethod=d.requestMethod;b.setCallbackFunction(this.callbackFunctionName);b.routeSearchByMultiPoi(a,c)};MRoutSearch.prototype.calculationNaviDistance=function(a,d){d||(d=new MRoutSearchOptions);var b=new MRouteSearch(1),c=new MRouteSearchOptions;c.resType=d.returnType;c.routeType=d.routeType;c.requestMethod=d.requestMethod;b.setCallbackFunction(this.callbackFunctionName);b.calculaNaviDistance(a,c)};MRoutSearch.prototype.calculationShortestDistance=
function(a,d,b){b||(b=new MRoutSearchOptions);var c=new MSpatialSearch(1),e=new MSpatialSearchOptions;e.resType=b.returnType;e.requestMethod=b.requestMethod;c.setCallbackFunction(this.callbackFunctionName);c.calculationP2LDistance(a,d,e)};MRoutSearch.prototype.getAllBusStations=function(a,d){if(MNoCheckKeyFlag)if(mValue_==-1){checkWrong(this.callbackFunctionName);return}var b=[],c=d;if(MSISCheckError.judgeParameter(a,"string","xml",this.callbackFunctionName,1))if(MSISCheckError.judgeParameter(c,"number",
"interval",this.callbackFunctionName,5)){var e="",f="",g="",h="";if(navigator.appName=="Microsoft Internet Explorer")if(a!=" "||a!=""||a!="undefined"){f=new ActiveXObject("Msxml2.DOMDocument.3.0");f.async=false;f.resolveExternals=false;f.loadXML(a);if(f.parseError.errorCode==0){var i=f.getElementsByTagName("CONTENT").item(0);if(i!=null){if(i.getElementsByTagName("STATION").length!=0)for(var j=0;j<i.getElementsByTagName("STATION").length;j++){h=i.getElementsByTagName("STATION").item(j);if(h.getElementsByTagName("DATA").length!=
0){f=h.getElementsByTagName("DATA").item(0).firstChild.nodeValue;stationXYs=h.getElementsByTagName("DATA").item(1).firstChild.nodeValue;g=stationXYs.split(";");var k=g[0];g=g[1];h=h.getElementsByTagName("DATA").item(4).firstChild.nodeValue;if(d>"0"){e+=f+";";e+=k+";";e+=g+";";e+=h+"#";if(h==c||j==i.getElementsByTagName("STATION").length-1){b.push(e);e="";c=d+c}}else{var l="";l+=f+";";l+=k+";";l+=g+";";l+=h;b.push(l)}}else b=null}}else b=null}}else b=null;else if(a!=" "&&a!=undefined&&a!=""){i=(new DOMParser).parseFromString(a,
"text/xml").getElementsByTagName("CONTENT").item(0);if(i!=null)if(i.getElementsByTagName("STATION").length!=0)for(j=0;j<i.getElementsByTagName("STATION").length;j++){h=i.getElementsByTagName("STATION").item(j);if(h.getElementsByTagName("DATA").length!=0){f=h.getElementsByTagName("DATA").item(0).firstChild.nodeValue;stationXYs=h.getElementsByTagName("DATA").item(1).firstChild.nodeValue;g=stationXYs.split(";");k=g[0];g=g[1];h=h.getElementsByTagName("DATA").item(4).firstChild.nodeValue;if(d>"0"){e+=
f+";";e+=k+";";e+=g+";";e+=h+"#";if(h==c||j==i.getElementsByTagName("STATION").length-1){b.push(e);e="";c=d+c}}else{l="";l+=f+";";l+=k+";";l+=g+";";l+=h;b.push(l)}}else b=null}}else b=null;return b}}}
if(typeof MRoutSearchOptions=="undefined"){MRoutSearchOptions=function(){};MRoutSearchOptions.prototype.routeType=0;MRoutSearchOptions.prototype.resultType=0;MRoutSearchOptions.prototype.returnType="JSON";MRoutSearchOptions.prototype.passByXY="";MRoutSearchOptions.prototype.per=150;MRoutSearchOptions.prototype.srcType="";MRoutSearchOptions.prototype.recordsPerPage=10;MRoutSearchOptions.prototype.pageNum=1;MRoutSearchOptions.prototype.requestMethod="get"}var msisFlag=true;
if(typeof MPoiSearch=="undefined"){MPoiSearch=function(a){if(msisFlag=a==1?false:true)if(MNoCheckKeyFlag){a=MSISGetKey("asaCore.js");MSearchDummy.availabilityKey(a,false,1)}};MPoiSearch.prototype.callbackFunctionName=null;MPoiSearch.prototype.serverUrl=MSISServerAddress+"highLight=false";MPoiSearch.prototype.setCallbackFunction=function(a){this.callbackFunctionName=a};MPoiSearch.prototype.poiSearchByKeywords=function(a,d,b){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");
else{var c;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;c=getMASAValidateKey()}else{c=MSISGetKey("asaCore.js");if(c==undefined)c=""}if(b==null||b==undefined||b=="")b=new MLocalSearchOptions;if(d)d=MSISCheckError.treatCityCodes(d);var e=b.dataType,f=b.recordsPerPage,g=b.pageNum,h=b.resType,i=b.dataSources,j=b.srcType,k=b.sr,l=b.eid,n=b.extId,r=b.userId,s=b.tempId;if(MSISCheckError.judgeParameter(a,"string","keywords",
this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(d,"string","city",this.callbackFunctionName,7))if(MSISCheckError.judgeParameter(e,"string","dataType",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(f,"number","recordsPerPage",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(g,"number","pageNum",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(i,"string","dataSources",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(j,"string","srcType",
this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(k,"number","sr",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(s,"string","tempId",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(r,"string","userId",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(l,"string","eid",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(n,"string","extId",this.callbackFunctionName,6)){a=encodeURI(a);d=encodeURI(d);e=encodeURI(e);var m=this.serverUrl;if(i==
MConstants.DS_BASE)m+=j==""?"&srctype=POI":"&srctype="+j;else if(i==MConstants.DS_USERPOI)m+=j==""?"&srctype=USERPOI&eid="+l+"&extid="+n+"&userid="+r+"&tempid="+s:"&srctype="+j+"&eid="+l+"&extid="+n+"&userid="+r+"&tempid="+s;else if(i==MConstants.DS_BASE_USERPOI)m+=j==""?"&srctype=USERPOI:10000%2BPOI":"&srctype="+j;else if(i==MConstants.DS_ENPOI)m+=j==""?"&srctype=DIBIAO":"&srctype="+j;else if(i==MConstants.DS_BASE_ENPOI)m+=j==""?"&srctype=DIBIAO:10000%2BPOI":"&srctype="+j;else if(i==MConstants.DS_BASE_BUS)m+=
j==""?"&srctype=BUS:100%2BPOI":"&srctype="+j;m+=i==MLocalSearch.USERPOI?"&config="+i+"SN&eid="+l+"&extid="+n+"&userid="+r+"&tempid="+s+"&srctype="+j:i==MLocalSearch.BASE_ENPOI||i==MLocalSearch.ENPOI||i==MLocalSearch.BASE||i==MLocalSearch.BASE_USERPOI?"&config="+i+"SN&srctype="+j:"&config=BESN";m+="&searchName="+a+"&cityCode="+d+"&searchType="+e+"&number="+f+"&batch="+g+"&a_k="+c+"&resType="+h+"&enc=utf-8&sr="+k;var p=new MAjaxRequest;if(m.length+35>=2048)checkUrlLength(this.callbackFunctionName);
else{p.setResponseHandler(this.callbackFunctionName,this);if(b.requestMethod.toLowerCase()=="get")p.sendRequest(m,a,e,g);else if(b.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){p.sendPostRequest(m,null,null,null)});else if(!isIE())if(true){a=false;setTimeout(function(){p.sendPostRequest(m,null,null,null)},300)}else p.sendPostRequest(m,null,null,null)}}}}};MPoiSearch.prototype.poiSearchByCenPoi=function(a,d,b,c){if(this.callbackFunctionName==null||this.callbackFunctionName==
undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var e;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;e=getMASAValidateKey()}else{e=MSISGetKey("asaCore.js");if(e==undefined)e=""}if(c==null||c==undefined||c=="")c=new MLocalSearchOptions;if(b)b=MSISCheckError.treatCityCodes(b);var f=c.dataType,g=c.recordsPerPage,h=c.pageNum,i=c.resType,j=c.dataSources,k=c.srcType,l=c.range,n=c.naviFlag,r=c.sr,
s=c.eid,m=c.extId,p=c.userId,q=c.tempId;if(MSISCheckError.judgeParameter(d,"string","keywords",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(b,"string","city",this.callbackFunctionName,7))if(MSISCheckError.judgeParameter(f,"string","dataType",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(g,"number","recordsPerPage",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(h,"number","pageNum",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(j,"string",
"dataSources",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(k,"string","srctype",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(r,"number","sr",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(l,"number","range",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(n,"number","naviflag",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(q,"string","tempId",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(p,"string","userId",
this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(s,"string","eid",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(m,"string","extId",this.callbackFunctionName,6)){d=encodeURI(d);b=encodeURI(b);f=encodeURI(f);var o="",t="";if(!MSISCheckError.judgeMLngLat(a,this.callbackFunctionName,"centerPoiXY")){o=a.lngX;t=a.latY;var v=this.serverUrl;if(j==MConstants.DS_BASE)v+=k==""?"&srctype=POI":"&srctype="+k;else if(j==MConstants.DS_USERPOI)v+=k==""?"&srctype=USERPOI&eid="+s+"&extid="+
m+"&userid="+p+"&tempid="+q:"&srctype="+k+"&eid="+s+"&extid="+m+"&userid="+p+"&tempid="+q;else if(j==MConstants.DS_BASE_USERPOI)v+=k==""?"&srctype=USERPOI:10000%2BPOI":"&srctype="+k;else if(j==MConstants.DS_ENPOI)v+=k==""?"&srctype=DIBIAO":"&srctype="+k;else if(j==MConstants.DS_BASE_ENPOI)v+=k==""?"&srctype=DIBIAO:10000%2BPOI":"&srctype="+k;else if(j==MConstants.DS_BASE_BUS)v+=k==""?"&srctype=BUS:100%2BPOI":"&srctype="+k;v+=j==MLocalSearch.USERPOI?"&config="+j+"LSBXY&eid="+s+"&extid="+m+"&userid="+
p+"&tempid="+q+"&srctype="+k:j==MLocalSearch.BASE_ENPOI||j==MLocalSearch.ENPOI||j==MLocalSearch.BASE||j==MLocalSearch.BASE_USERPOI?"&config="+j+"LSBXY&srctype="+k:"&config=BELSBXY";v+="&searchName="+d+"&cityCode="+b+"&cenX="+o+"&cenY="+t;v+="&searchType="+f+"&number="+g+"&batch="+h+"&a_k="+e+"&resType="+i+"&enc=utf-8&sr="+r+"&range="+l+"&naviflag="+n;var w=new MAjaxRequest;if(v.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{w.setResponseHandler(this.callbackFunctionName,this);if(c.requestMethod.toLowerCase()==
"get")w.sendRequest(v,d,f,h);else if(c.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){w.sendPostRequest(v,null,null,null)});else if(!isIE())if(true){a=false;setTimeout(function(){w.sendPostRequest(v,null,null,null)},300)}else w.sendPostRequest(v,null,null,null)}}}}}};MPoiSearch.prototype.poiSearchByCenKeywords=function(a,d,b,c){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var e;
if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;e=getMASAValidateKey()}else{e=MSISGetKey("asaCore.js");if(e==undefined)e=""}if(c==null||c==undefined||c=="")c=new MLocalSearchOptions;if(b)b=MSISCheckError.treatCityCodes(b);var f=c.dataType,g=c.recordsPerPage,h=c.pageNum,i=c.resType,j=c.dataSources,k=c.srcType,l=c.range,n=c.naviFlag,r=c.sr,s=c.eid,m=c.extId,p=c.userId,q=c.tempId;if(MSISCheckError.judgeParameter(d,"string",
"keywords",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(a,"string","centerKeywords",this.callbackFunctionName,7))if(MSISCheckError.judgeParameter(b,"string","city",this.callbackFunctionName,7))if(MSISCheckError.judgeParameter(f,"string","dataType",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(g,"number","recordsPerPage",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(h,"number","pageNum",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(j,
"string","dataSources",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(k,"string","srctype",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(r,"number","sr",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(l,"number","range",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(n,"number","naviflag",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(q,"string","tempId",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(p,"string",
"userId",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(s,"string","eid",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(m,"string","extId",this.callbackFunctionName,6)){var o=this.serverUrl;if(j==MConstants.DS_BASE)o+=k==""?"&srctype=POI":"&srctype="+k;else if(j==MConstants.DS_USERPOI)o+=k==""?"&srctype=USERPOI&eid="+s+"&extid="+m+"&userid="+p+"&tempid="+q:"&srctype="+k+"&eid="+s+"&extid="+m+"&userid="+p+"&tempid="+q;else if(j==MConstants.DS_BASE_USERPOI)o+=k==""?"&srctype=USERPOI:10000%2BPOI":
"&srctype="+k;else if(j==MConstants.DS_ENPOI)o+=k==""?"&srctype=DIBIAO":"&srctype="+k;else if(j==MConstants.DS_BASE_ENPOI)o+=k==""?"&srctype=DIBIAO:10000%2BPOI":"&srctype="+k;else if(j==MConstants.DS_BASE_BUS)o+=k==""?"&srctype=BUS:100%2BPOI":"&srctype="+k;a=encodeURI(a);b=encodeURI(b);d=encodeURI(d);o+=j==MLocalSearch.USERPOI?"&config="+j+"LSBN&eid="+s+"&extid="+m+"&userid="+p+"&tempid="+q+"&srctype="+k:j==MLocalSearch.BASE_ENPOI||j==MLocalSearch.ENPOI||j==MLocalSearch.BASE||j==MLocalSearch.BASE_USERPOI?
"&config="+j+"LSBN&srctype="+k:"&config=BELSBN";o+="&searchName="+d+"&cityCode="+b+"&cenName="+a;o+="&searchType="+f+"&number="+g+"&batch="+h+"&a_k="+e+"&resType="+i+"&enc=utf-8&sr="+r+"&range="+l+"&naviflag="+n;var t=new MAjaxRequest;if(o.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{t.setResponseHandler(this.callbackFunctionName,this);if(c.requestMethod.toLowerCase()=="get")t.sendRequest(o,d,f,h);else if(c.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){t.sendPostRequest(o,
null,null,null)});else if(!isIE())if(true){a=false;setTimeout(function(){t.sendPostRequest(o,null,null,null)},300)}else t.sendPostRequest(o,null,null,null)}}}}};MPoiSearch.prototype.poiSearchByCenGridCode=function(a,d,b,c){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var e;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;e=getMASAValidateKey()}else{e=
MSISGetKey("asaCore.js");if(e==undefined)e=""}if(b)b=MSISCheckError.treatCityCodes(b);if(c==null||c==undefined||c=="")c=new MPoiSearchOptions;var f=c.dataType,g=c.recordsPerPage,h=c.pageNum,i=c.resType,j=c.dataSources,k=c.srcType,l=c.range,n=c.naviFlag,r=c.sr,s=c.eid,m=c.extId,p=c.userId,q=c.tempId;if(MSISCheckError.judgeParameter(d,"string","keywords",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(a,"string","centerGridCode",this.callbackFunctionName,7))if(MSISCheckError.judgeParameter(b,
"string","city",this.callbackFunctionName,7))if(MSISCheckError.judgeParameter(f,"string","dataType",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(g,"number","recordsPerPage",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(h,"number","pageNum",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(j,"string","dataSources",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(k,"string","srctype",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(l,
"number","range",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(n,"number","naviflag",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(r,"number","sr",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(q,"string","tempId",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(p,"string","userId",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(s,"string","eid",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(m,"string","extId",
this.callbackFunctionName,6)){b=encodeURI(b);d=encodeURI(d);var o=this.serverUrl;if(j==MConstants.DS_BASE)o+=k==""?"&srctype=POI":"&srctype="+k;else if(j==MConstants.DS_USERPOI)o+=k==""?"&srctype=USERPOI&eid="+s+"&extid="+m+"&userid="+p+"&tempid="+q:"&srctype="+k+"&eid="+s+"&extid="+m+"&userid="+p+"&tempid="+q;else if(j==MConstants.DS_BASE_USERPOI)o+=k==""?"&srctype=USERPOI:10000%2BPOI":"&srctype="+k;else if(j==MConstants.DS_ENPOI)o+=k==""?"&srctype=DIBIAO":"&srctype="+k;else if(j==MConstants.DS_BASE_ENPOI)o+=
k==""?"&srctype=DIBIAO:10000%2BPOI":"&srctype="+k;else if(j==MConstants.DS_BASE_BUS)o+=k==""?"&srctype=BUS:100%2BPOI":"&srctype="+k;o+="&config=BELSBGC&searchName="+d+"&cityCode="+b+"&cenGridCode="+a;o+="&searchType="+f+"&number="+g+"&batch="+h+"&a_k="+e+"&resType="+i+"&enc=utf-8&range="+l+"&sr="+r+"&naviflag="+n;var t=new MAjaxRequest;if(o.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{t.setResponseHandler(this.callbackFunctionName,this);if(c.requestMethod.toLowerCase()=="get")t.sendRequest(o,
d,f,h);else if(c.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){t.sendPostRequest(o,null,null,null)});else if(!isIE())if(true){a=false;setTimeout(function(){t.sendPostRequest(o,null,null,null)},300)}else t.sendPostRequest(o,null,null,null)}}}}};MPoiSearch.prototype.poiSearchByCenLineCross=function(a,d,b,c){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var e;if(MNoCheckKeyFlag){if(mValue_==
-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;e=getMASAValidateKey()}else{e=MSISGetKey("asaCore.js");if(e==undefined)e=""}if(c==null||c==undefined||c=="")c=new MPoiSearchOptions;var f=c.resType;c.keywords=b;if(!MSISCheckError.judgeMLngLats(a,this.callbackFunctionName,"line1"))if(!MSISCheckError.judgeMLngLats(d,this.callbackFunctionName,"line2")){c.lineXY1=a;c.lineXY2=d;if(MSISCheckError.judgeParameter(b,"string","keywords",this.callbackFunctionName,
6)){c.method="localSearchByLineIntersection";a=this.createXML(c);if(a!=undefined){a=a.replace('<?xml version="1.0"?>','<?xml version="1.0" encoding="gb2312"?>');a=encodeURI(a);var g=this.serverUrl;g+="&config=SPAS&searchName="+b+"&resType="+f+"&enc=utf-8&spatialXml="+a+"&a_k="+e;var h=new MAjaxRequest;if(g.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{h.setResponseHandler(this.callbackFunctionName,this);if(c.requestMethod.toLowerCase()=="get")h.sendRequest(g,null,null,null);else if(c.requestMethod.toLowerCase()==
"post"){initFP_();if(isIE())setTimeout(function(){h.sendPostRequest(g,null,null,null)});else if(!isIE())if(true){b=false;setTimeout(function(){h.sendPostRequest(g,null,null,null)},300)}else h.sendPostRequest(g,null,null,null)}}}}}}};MPoiSearch.prototype.poiSearchByPguid=function(a,d,b){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var c;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);
return}if(isAccess(this.callbackFunctionName))return;c=getMASAValidateKey()}else{c=MSISGetKey("asaCore.js");if(c==undefined)c=""}if(b==null||b==undefined||b=="")b=new MPoiSearchOptions;if(d)d=MSISCheckError.treatCityCodes(d);if(MSISCheckError.judgeParameter(a,"string","pguid",this.callbackFunctionName,7))if(MSISCheckError.judgeParameter(d,"string","city",this.callbackFunctionName,7)){var e=b.resType,f=b.srcType;if(MSISCheckError.judgeParameter(f,"string","srctype",this.callbackFunctionName,6)){var g=
b.dataSources,h=b.eid,i=b.extId,j=b.userId,k=b.tempId;if(MSISCheckError.judgeParameter(k,"string","tempId",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(j,"string","userId",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(h,"string","eid",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(i,"string","extId",this.callbackFunctionName,6)){var l=this.serverUrl;if(g==MConstants.DS_BASE)l+=f==""?"&srctype=POI":"&srctype="+f;else if(g==MConstants.DS_USERPOI)l+=f==
""?"&srctype=USERPOI&eid="+h+"&extid="+i+"&userid="+j+"&tempid="+k:"&srctype="+f+"&eid="+h+"&extid="+i+"&userid="+j+"&tempid="+k;else if(g==MConstants.DS_BASE_USERPOI)l+=f==""?"&srctype=USERPOI:10000%2BPOI":"&srctype="+f;else if(g==MConstants.DS_ENPOI)l+=f==""?"&srctype=DIBIAO":"&srctype="+f;else if(g==MConstants.DS_BASE_ENPOI)l+=f==""?"&srctype=DIBIAO:10000%2BPOI":"&srctype="+f;else if(g==MConstants.DS_BASE_BUS)l+=f==""?"&srctype=BUS:100%2BPOI":"&srctype="+f;l+="&config=BESI&resType="+e+"&enc=utf-8&cityCode="+
d+"&pguid="+a+"&a_k="+c;var n=new MAjaxRequest;if(l.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{n.setResponseHandler(this.callbackFunctionName,this);if(b.requestMethod.toLowerCase()=="get")n.sendRequest(l,null,null,null);else if(b.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){n.sendPostRequest(l,null,null,null)});else if(!isIE())if(true){a=false;setTimeout(function(){n.sendPostRequest(l,null,null,null)},300)}else n.sendPostRequest(l,null,null,null)}}}}}}};
MPoiSearch.prototype.poiSearchByRegion=function(a,d,b,c){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var e;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;e=getMASAValidateKey()}else{e=MSISGetKey("asaCore.js");if(e==undefined)e=""}if(c==null||c==undefined||c=="")c=new MPoiSearchOptions;if(MSISCheckError.judgeParameter(a,"string",
"regionType",this.callbackFunctionName,7))if(MSISCheckError.judgeParameter(b,"string","keywords",this.callbackFunctionName,6))if(!MSISCheckError.judgeMLngLats(d,this.callbackFunctionName,"regionXY")){c.regionType=a;c.regionXY=d;c.keywords=b;c.method="searchPoiInGeoObject";a=c.resType;d=c.dataSources;b=this.createXML(c);if(b!=undefined){b=b.replace('<?xml version="1.0"?>','<?xml version="1.0" encoding="gb2312"?>');b=encodeURI(b);var f=this.serverUrl;f+="&resType="+a+"&enc=utf-8";if(d==MConstants.DS_BASE_ENPOI||
d==MConstants.DS_BASE||d==MConstants.DS_ENPOI||d==MConstants.DS_BASE_BUS)f+="&config=SPAS";else if(d==MConstants.DS_USERPOI||d==MConstants.DS_BASE_USERPOI)f+="&config=USPAS";if(d==MLocalSearch.BASE)f+="&config=SPAS";else if(d==MLocalSearch.USERPOI)f+="&config=USPAS";f+="&spatialXml="+b+"&a_k="+e;var g=new MAjaxRequest;if(f.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{g.setResponseHandler(this.callbackFunctionName,this);if(c.requestMethod.toLowerCase()=="get")g.sendRequest(f,null,
null,null);else if(c.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){g.sendPostRequest(f,null,null,null)});else if(!isIE())if(true){c=false;setTimeout(function(){g.sendPostRequest(f,null,null,null)},300)}else g.sendPostRequest(f,null,null,null)}}}}}};MPoiSearch.prototype.poiSearchByLine=function(a,d,b,c){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var e;if(MNoCheckKeyFlag){if(mValue_==
-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;e=getMASAValidateKey()}else{e=MSISGetKey("asaCore.js");if(e==undefined)e=""}if(b)b=MSISCheckError.treatCityCodes(b);if(c==null||c==undefined||c=="")c=new MPoiSearchOptions;if(!MSISCheckError.judgeMLngLats(a,this.callbackFunctionName,"lineXY"))if(MSISCheckError.judgeParameter(d,"string","keywords",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(b,"string","city",this.callbackFunctionName,7)){c.lineXY1=
a;c.keywords=d;c.city=b;c.method="localSearchPoiInLine";a=c.resType;d=this.createXML(c);if(d!=undefined){d=d.replace('<?xml version="1.0"?>','<?xml version="1.0" encoding="gb2312"?>');d=encodeURI(d);var f=this.serverUrl;f+="&config=SPAS&resType="+a+"&enc=utf-8";f+="&spatialXml="+d+"&a_k="+e;var g=new MAjaxRequest;if(f.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{g.setResponseHandler(this.callbackFunctionName,this);if(c.requestMethod.toLowerCase()=="get")g.sendRequest(f,null,null,
null);else if(c.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){g.sendPostRequest(f,null,null,null)});else if(!isIE())if(true){c=false;setTimeout(function(){g.sendPostRequest(f,null,null,null)},300)}else g.sendPostRequest(f,null,null,null)}}}}}};MPoiSearch.prototype.poiSearchByRoadId=function(a,d,b,c){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var e;if(MNoCheckKeyFlag){if(mValue_==
-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;e=getMASAValidateKey()}else{e=MSISGetKey("asaCore.js");if(e==undefined)e=""}if(b)b=MSISCheckError.treatCityCodes(b);if(MSISCheckError.judgeParameter(d,"string","keywords",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(b,"string","city",this.callbackFunctionName,7))if(MSISCheckError.judgeParameter(a,"string","roadId",this.callbackFunctionName,7)){if(c==null||c==undefined||c=="")c=new MPoiSearchOptions;
c.keywords=d;c.city=b;c.method="searchPoiByRoadId";c.roadId=a;a=c.resType;d=this.createXML(c);if(d!=undefined){d=d.replace('<?xml version="1.0"?>','<?xml version="1.0" encoding="gb2312"?>');d=encodeURI(d);var f=this.serverUrl;f+="&config=SPAS&resType="+a+"&enc=utf-8";f+="&spatialXml="+d+"&a_k="+e;var g=new MAjaxRequest;if(f.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{g.setResponseHandler(this.callbackFunctionName,this);if(c.requestMethod.toLowerCase()=="get")g.sendRequest(f,null,
null,null);else if(c.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){g.sendPostRequest(f,null,null,null)});else if(!isIE())if(true){c=false;setTimeout(function(){g.sendPostRequest(f,null,null,null)},300)}else g.sendPostRequest(f,null,null,null)}}}}}};MPoiSearch.prototype.typeAhead=function(a,d,b){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var c;if(MNoCheckKeyFlag){if(mValue_==
-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;c=getMASAValidateKey()}else{c=MSISGetKey("asaCore.js");if(c==undefined)c=""}if(d)d=MSISCheckError.treatCityCodes(d);if(MSISCheckError.judgeParameter(a,"string","keywords",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(d,"string","city",this.callbackFunctionName,7)){if(b==null||b==undefined||b=="")b=new MPoiSearchOptions;var e=b.resType;d=encodeURI(d);a=encodeURI(a);var f=this.serverUrl;f+=
"&config=TIP&ver=2.0&searchName="+a+"&cityCode="+d+"&a_k="+c+"&resType="+e+"&enc=utf-8";a=new MAjaxRequest;if(f.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{a.setResponseHandler(this.callbackFunctionName,this);if(b.requestMethod.toLowerCase()=="get")a.sendRequest(f,null,null,null);else b.requestMethod.toLowerCase()=="post"&&a.sendRequest(f,null,null,null)}}}};MPoiSearch.prototype.poiSearchByDistrictName=function(a,d,b,c){if(this.callbackFunctionName==null||this.callbackFunctionName==
undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var e;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;e=getMASAValidateKey()}else{e=MSISGetKey("asaCore.js");if(e==undefined)e=""}if(b)b=MSISCheckError.treatCityCodes(b);if(MSISCheckError.judgeParameter(a,"string","districtName",this.callbackFunctionName,7))if(MSISCheckError.judgeParameter(d,"string","keywords",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(b,
"string","city",this.callbackFunctionName,7)){if(c==null||c==undefined||c=="")c=new MPoiSearchOptions;c.districtName=a;c.keywords=d;c.city=b;c.method="searchPoiInDistrict";a=c.resType;d=this.createXML(c);if(d!=undefined){d=d.replace('<?xml version="1.0"?>','<?xml version="1.0" encoding="gb2312"?>');d=encodeURI(d);var f=this.serverUrl;f+="&config=SPAS&resType="+a+"&enc=utf-8";f+="&spatialXml="+d+"&a_k="+e;var g=new MAjaxRequest;if(f.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{g.setResponseHandler(this.callbackFunctionName,
this);if(c.requestMethod.toLowerCase()=="get")g.sendRequest(f,null,null,null);else if(c.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){g.sendPostRequest(f,null,null,null)});else if(!isIE())if(true){c=false;setTimeout(function(){g.sendPostRequest(f,null,null,null)},300)}else g.sendPostRequest(f,null,null,null)}}}}}};MPoiSearch.prototype.createXML=function(a){var d=a.dataType,b=a.recordsPerPage,c=a.pageNum,e=a.lineXY1,f=a.lineXY2,g=a.keywords,h=a.method,i=a.buffer,j=
a.sortRule,k=a.range,l=a.sign,n=a.srcType;if(n=="")n="poi";var r=a.custom,s=a.custom_and;if(MSISCheckError.judgeParameter(d,"string","dataType",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(b,"number","recordsPerPage",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(c,"number","pageNum",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(i,"number","buffer",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(j,"number","sortRule",this.callbackFunctionName,
4))if(MSISCheckError.judgeParameter(k,"number","range",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(l,"number","sign",this.callbackFunctionName,4)){var m=a.regionXY,p=a.regionType,q=a.cenXY,o=a.city,t=a.roadId;a=a.districtName;var v="",w="";if(q)if(q instanceof MLngLat||q.lngX&&q.latY){v+=q.lngX;w+=q.latY}var x=q="",z="";if(e)if(e instanceof MLngLats||e.lnglatArr){e=e.lnglatArr;for(var u=0;u<e.length;u++)if(e[u]instanceof MLngLat||e[u].lngX&&e[u].latY){var y=e[u];y=[y.lngX.toString(),
y.latY.toString()].join(",");x+=u==e.length-1?y:y+","}}if(f)if(f instanceof MLngLats||f.lnglatArr){u=f.lnglatArr;for(f=0;f<u.length;f++)if(u[f]instanceof MLngLat||u[f].lngX&&u[f].latY){e=u[f];e=[e.lngX.toString(),e.latY.toString()].join(",");z+=f==u.length-1?e:e+","}}if(m)if(m instanceof MLngLats||m.lnglatArr){e=m.lnglatArr;if(p=="Rectangle"||p=="rectangle"||p=="rect"||p=="Rect"||p=="Circle"||p=="circle")for(f=0;f<e.length;f++){if(e[f]instanceof MLngLat||e[f].lngX&&e[f].latY){u=e[f];m=[u.lngX,u.latY];
m=m.join(";");q+=f==e.length-1?m:m+";"}}else for(f=0;f<e.length;f++)if(e[f]instanceof MLngLat||e[f].lngX&&e[f].latY){u=e[f];m=[u.lngX,u.latY];m=m.join(",");q+=f==e.length-1?m:m+","}}if(navigator.appName=="Microsoft Internet Explorer"){xmlDoc=new ActiveXObject("Msxml2.DOMDocument.3.0");m=xmlDoc.createProcessingInstruction("xml","version='1.0' encoding='gb2312'");xmlDoc.appendChild(m);m=xmlDoc.documentElement;m=xmlDoc.createNode(1,"spatial_request","");e=xmlDoc.createAttribute("method");e.value=h;m.setAttributeNode(e);
createSimpleNode("searchName",g,m,xmlDoc);createSimpleNode("searchType",d,m,xmlDoc);createSimpleNode("pageNum",b.toString(),m,xmlDoc);createSimpleNode("batch",c.toString(),m,xmlDoc);createSimpleNode("sortRule",j.toString(),m,xmlDoc);createSimpleNode("cityCode",o,m,xmlDoc);createSimpleNode("buffer",i.toString(),m,xmlDoc);createSimpleNode("id",t,m,xmlDoc);createSimpleNode("srcType",n,m,xmlDoc);createSimpleNode("custom",r,m,xmlDoc);createSimpleNode("custom_and",s,m,xmlDoc);createSimpleNode("districtName",
a,m,xmlDoc);if(h=="localSearchPoiInLine"){createSimpleNode("sign",l.toString(),m,xmlDoc);createSimpleNode("cenX",v,m,xmlDoc);createSimpleNode("cenY",w,m,xmlDoc);createSimpleNode("coors",x,m,xmlDoc)}if(h=="localSearchByLineIntersection"){createSimpleNode("range",k.toString(),m,xmlDoc);createSpecialXML(x,z,i.toString(),m,xmlDoc)}h=="searchPoiInGeoObject"&&createComplexNode(p,q,i.toString(),m,xmlDoc);xmlDoc.appendChild(m);return m.ownerDocument.xml}else{e=parseXML('<?xml version="1.0"?><spatial_request />');
m=e.firstChild;m.setAttribute("method",h.toString());createSimpleNode("searchName",g,m,e);createSimpleNode("searchType",d,m,e);createSimpleNode("pageNum",b.toString(),m,e);createSimpleNode("batch",c.toString(),m,e);createSimpleNode("sortRule",j.toString(),m,e);createSimpleNode("buffer",i.toString(),m,e);createSimpleNode("id",t,m,e);createSimpleNode("cityCode",o,m,e);createSimpleNode("srcType",n,m,e);createSimpleNode("custom",r,m,e);createSimpleNode("custom_and",s,m,e);createSimpleNode("districtName",
a,m,e);if(h=="localSearchPoiInLine"){createSimpleNode("sign",l.toString(),m,e);createSimpleNode("cenX",v,m,e);createSimpleNode("cenY",w,m,e);createSimpleNode("coors",x,m,e)}if(h=="localSearchByLineIntersection"){createSimpleNode("range",k.toString(),m,e);createSpecialXML(x,z,i.toString(),m,e)}h=="searchPoiInGeoObject"&&createComplexNode(p,q,i.toString(),m,e);return nodeToString(e)}}}}
if(typeof MPoiSearchOptions=="undefined"){MPoiSearchOptions=function(){};MPoiSearchOptions.prototype.dataType="";MPoiSearchOptions.prototype.recordsPerPage=10;MPoiSearchOptions.prototype.pageNum=1;MPoiSearchOptions.prototype.resType="JSON";MPoiSearchOptions.prototype.enc="utf-8";MPoiSearchOptions.prototype.srcType="";MPoiSearchOptions.prototype.dataSources=MConstants.DS_BASE_ENPOI;MPoiSearchOptions.prototype.range=3E3;MPoiSearchOptions.prototype.naviFlag=0;MPoiSearchOptions.prototype.buffer=6E3;MPoiSearchOptions.prototype.sortRule=
0;MPoiSearchOptions.prototype.resData=0;MPoiSearchOptions.prototype.sr=0;MPoiSearchOptions.prototype.roadLevel=0;MPoiSearchOptions.prototype.cenXY=null;MPoiSearchOptions.prototype.sign=1;MPoiSearchOptions.prototype.requestMethod="get";MPoiSearchOptions.prototype.custom="";MPoiSearchOptions.prototype.custom_and="";MPoiSearchOptions.prototype.extId="";MPoiSearchOptions.prototype.eid="";MPoiSearchOptions.prototype.userId="";MPoiSearchOptions.prototype.tempId="";MPoiSearchOptions.prototype.keywords="";
MPoiSearchOptions.prototype.cityCode="";MPoiSearchOptions.prototype.method="";MPoiSearchOptions.prototype.lineXY1=null;MPoiSearchOptions.prototype.lineXY2=null;MPoiSearchOptions.prototype.regionType="";MPoiSearchOptions.prototype.regionXY=null;MPoiSearchOptions.prototype.city="";MPoiSearchOptions.prototype.roadId="";MPoiSearchOptions.prototype.districtName=""}
if(typeof MRouteSearch=="undefined"){MRouteSearch=function(a){if(msisFlag=a==1?false:true)if(MNoCheckKeyFlag){a=MSISGetKey("asaCore.js");MSearchDummy.availabilityKey(a,false,1)}};MRouteSearch.prototype.callbackFunctionName=null;MRouteSearch.prototype.serverUrl=MSISServerAddress+"highLight=false";MRouteSearch.prototype.setCallbackFunction=function(a){this.callbackFunctionName=a};MRouteSearch.prototype.routeSearchByTwoPoi=function(a,d,b){if(this.callbackFunctionName==null||this.callbackFunctionName==
undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var c;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;c=getMASAValidateKey()}else{c=MSISGetKey("asaCore.js");if(c==undefined)c=""}if(b==null||b==undefined||b=="")b=new MRouteSearchOptions;var e=b.resType,f=b.per,g=b.routeType,h=b.region,i=b.name,j=b.avoidanceType,k=b.passByXY,l=b.ext;if(MSISCheckError.judgeParameter(h,"string","region",this.callbackFunctionName,
6))if(MSISCheckError.judgeParameter(i,"string","name",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(g,"number","routeType",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(j,"number","avoidanceType",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(f,"number","per",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(l,"number","ext",this.callbackFunctionName,4))if(!MSISCheckError.judgeMLngLat(a,this.callbackFunctionName,"startPoiXY"))if(!MSISCheckError.judgeMLngLat(d,
this.callbackFunctionName,"endPoiXY")){var n="",r="",s="",m="";if(a instanceof MLngLat||a.lngX&&a.latY){n=a.lngX;r=a.latY}if(d instanceof MLngLat||d.lngX&&d.latY){s=d.lngX;m=d.latY}d=a="";if(k)if(k instanceof MLngLats||k.lnglatArr){k=k.lnglatArr;for(var p=0;p<k.length;p++)if(k[p]instanceof MLngLat||k[p].lngX&&k[p].latY){var q=k[p];a+=q.lngX+",";d+=q.latY+","}d=d.substring(0,d.length-1);a=a.substring(0,a.length-1)}var o=this.serverUrl;o+="&config=R&ver=2.0&x1="+n+"&y1="+r+"&x2="+s+"&y2="+m+"&resType="+
e+"&enc=utf-8&per="+f+"&ext="+l;o+="&xs="+a+"&ys="+d+"&region="+h+"&routeType="+g+"&name="+i+"&avoidanceType="+j+"&a_k="+c;var t=new MAjaxRequest;if(o.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{t.setResponseHandler(this.callbackFunctionName,this);if(b.requestMethod.toLowerCase()=="get")t.sendRequest(o,null,null,null);else if(b.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){t.sendPostRequest(o,null,null,null)});else if(!isIE())if(true){b=false;setTimeout(function(){t.sendPostRequest(o,
null,null,null)},300)}else t.sendPostRequest(o,null,null,null)}}}}};MRouteSearch.prototype.routeSearchByMultiPoi=function(a,d){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var b;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;b=getMASAValidateKey()}else{b=MSISGetKey("asaCore.js");if(b==undefined)b=""}if(d==null||d==undefined||
d=="")d=new MRouteSearchOptions;if(!MSISCheckError.judgeMLngLats(a,this.callbackFunctionName,"multiPoiXY")){var c=d.routeType,e=d.resType,f=d.per;if(MSISCheckError.judgeParameter(c,"number","routeType",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(f,"number","per",this.callbackFunctionName,4)){var g="",h="";if(a instanceof MLngLats||a.lnglatArr){for(var i=a.lnglatArr,j=0;j<i.length;j++)if(i[j]instanceof MLngLat||i[j].lngX&&i[j].latY){var k=i[j];g+=k.lngX+",";h+=k.latY+","}h=h.substring(0,
h.length-1);g=g.substring(0,g.length-1)}var l=this.serverUrl;l+="&config=R&ver=2.0&xs="+g+"&ys="+h+"&enc=utf-8&resType="+e+"&routeType="+c+"&per="+f+"&a_k="+b;var n=new MAjaxRequest;if(l.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{n.setResponseHandler(this.callbackFunctionName,this);if(d.requestMethod.toLowerCase()=="get")n.sendRequest(l,null,null,null);else if(d.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){n.sendPostRequest(l,null,null,null)});
else if(!isIE())if(true){b=false;setTimeout(function(){n.sendPostRequest(l,null,null,null)},300)}else n.sendPostRequest(l,null,null,null)}}}}}};MRouteSearch.prototype.calculaNaviDistance=function(a,d){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var b;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;b=getMASAValidateKey()}else{b=
MSISGetKey("asaCore.js");if(b==undefined)b=""}if(!MSISCheckError.judgeMLngLats(a,this.callbackFunctionName,"multiPoiXY")){if(d==null||d==undefined||d=="")d=new MRouteSearchOptions;var c=d.routeType;if(MSISCheckError.judgeParameter(c,"number","routeType",this.callbackFunctionName,4)){var e=d.resType,f="",g="";if(a instanceof MLngLats||a.lnglatArr){for(var h=a.lnglatArr,i=0;i<h.length;i++)if(h[i]instanceof MLngLat||h[i].lngX&&h[i].latY){var j=h[i];f+=j.lngX+",";g+=j.latY+","}g=g.substring(0,g.length-
1);f=f.substring(0,f.length-1)}var k=this.serverUrl;k+="&config=CDR&ver=2.0&xs="+f+"&ys="+g+"&enc=utf-8&resType="+e+"&routeType="+c+"&a_k="+b;var l=new MAjaxRequest;if(k.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{l.setResponseHandler(this.callbackFunctionName,this);if(d.requestMethod.toLowerCase()=="get")l.sendRequest(k,null,null,null);else if(d.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){l.sendPostRequest(k,null,null,null)});else if(!isIE())if(true){b=
false;setTimeout(function(){l.sendPostRequest(k,null,null,null)},300)}else l.sendPostRequest(k,null,null,null)}}}}}}}
if(typeof MRouteSearchOptions=="undefined"){MRouteSearchOptions=function(){};MRouteSearchOptions.prototype.resType="json";MRouteSearchOptions.prototype.enc="utf-8";MRouteSearchOptions.prototype.routeType=0;MRouteSearchOptions.prototype.region="";MRouteSearchOptions.prototype.avoidanceType=0;MRouteSearchOptions.prototype.name="";MRouteSearchOptions.prototype.per=150;MRouteSearchOptions.prototype.passByXY=null;MRouteSearchOptions.prototype.requestMethod="get";MRouteSearchOptions.prototype.ext=0}
if(typeof MBusSearch=="undefined"){MBusSearch=function(a){if(msisFlag=a==1?false:true)if(MNoCheckKeyFlag){a=MSISGetKey("asaCore.js");MSearchDummy.availabilityKey(a,false,1)}};MBusSearch.prototype.callbackFunctionName=null;MBusSearch.prototype.serverUrl=MSISServerAddress+"highLight=false";MBusSearch.prototype.setCallbackFunction=function(a){this.callbackFunctionName=a};MBusSearch.prototype.getAllBusStations=function(a,d){if(MNoCheckKeyFlag)if(mValue_==-1){checkWrong(this.callbackFunctionName);return}var b=
[],c=d;if(MSISCheckError.judgeParameter(a,"string","xml",this.callbackFunctionName,1))if(MSISCheckError.judgeParameter(c,"number","interval",this.callbackFunctionName,5)){var e="",f="",g="",h="";if(navigator.appName=="Microsoft Internet Explorer")if(a!=" "||a!=""||a!="undefined"){f=new ActiveXObject("Msxml2.DOMDocument.3.0");f.async=false;f.resolveExternals=false;f.loadXML(a);if(f.parseError.errorCode==0){var i=f.getElementsByTagName("CONTENT").item(0);if(i!=null){if(i.getElementsByTagName("STATION").length!=
0)for(var j=0;j<i.getElementsByTagName("STATION").length;j++){h=i.getElementsByTagName("STATION").item(j);if(h.getElementsByTagName("DATA").length!=0){f=h.getElementsByTagName("DATA").item(0).firstChild.nodeValue;stationXYs=h.getElementsByTagName("DATA").item(1).firstChild.nodeValue;g=stationXYs.split(";");var k=g[0];g=g[1];h=h.getElementsByTagName("DATA").item(4).firstChild.nodeValue;if(d>"0"){e+=f+";";e+=k+";";e+=g+";";e+=h+"#";if(h==c||j==i.getElementsByTagName("STATION").length-1){b.push(e);e=
"";c=d+c}}else{var l="";l+=f+";";l+=k+";";l+=g+";";l+=h;b.push(l)}}else b=null}}else b=null}}else b=null;else if(a!=" "&&a!=undefined&&a!=""){i=(new DOMParser).parseFromString(a,"text/xml").getElementsByTagName("CONTENT").item(0);if(i!=null)if(i.getElementsByTagName("STATION").length!=0)for(j=0;j<i.getElementsByTagName("STATION").length;j++){h=i.getElementsByTagName("STATION").item(j);if(h.getElementsByTagName("DATA").length!=0){f=h.getElementsByTagName("DATA").item(0).firstChild.nodeValue;stationXYs=
h.getElementsByTagName("DATA").item(1).firstChild.nodeValue;g=stationXYs.split(";");k=g[0];g=g[1];h=h.getElementsByTagName("DATA").item(4).firstChild.nodeValue;if(d>"0"){e+=f+";";e+=k+";";e+=g+";";e+=h+"#";if(h==c||j==i.getElementsByTagName("STATION").length-1){b.push(e);e="";c=d+c}}else{l="";l+=f+";";l+=k+";";l+=g+";";l+=h;b.push(l)}}else b=null}}else b=null;return b}};MBusSearch.prototype.busSearchByTwoPoi=function(a,d,b,c){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");
else{var e;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;e=getMASAValidateKey()}else{e=MSISGetKey("asaCore.js");if(e==undefined)e=""}b=MSISCheckError.treatCityCodes(b);b=encodeURI(b);if(!MSISCheckError.judgeMLngLat(a,this.callbackFunctionName,"startPoiXY"))if(!MSISCheckError.judgeMLngLat(d,this.callbackFunctionName,"endPoiXY"))if(MSISCheckError.judgeParameter(b,"string","city",this.callbackFunctionName,7)){if(c==null||
c==undefined||c=="")c=new MBusSearchOptions;var f="",g="",h="",i="";if(a instanceof MLngLat||a.lngX&&a.latY){f=a.lngX;g=a.latY}if(d instanceof MLngLat||d.lngX&&d.latY){h=d.lngX;i=d.latY}a=c.per;d=c.routeType;if(MSISCheckError.judgeParameter(d,"number","routeType",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(a,"number","per",this.callbackFunctionName,4)){var j=this.serverUrl;j+="&config=BR&ver=2.0&x1="+f+"&y1="+g+"&x2="+h+"&y2="+i+"&cityCode="+b+"&per="+a+"&routeType="+d+"&resType="+
c.resType+"&enc=utf-8&a_k="+e;var k=new MAjaxRequest;if(j.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{k.setResponseHandler(this.callbackFunctionName,this);if(c.requestMethod.toLowerCase()=="get")k.sendRequest(j,null,null,null);else if(c.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){k.sendPostRequest(j,null,null,null)});else if(!isIE())if(true){b=false;setTimeout(function(){k.sendPostRequest(j,null,null,null)},300)}else k.sendPostRequest(j,null,null,
null)}}}}}};MBusSearch.prototype.busSearchByBusId=function(a,d,b){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var c;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;c=getMASAValidateKey()}else{c=MSISGetKey("asaCore.js");if(c==undefined)c=""}d=MSISCheckError.treatCityCodes(d);if(b==null||b==undefined||b=="")b=new MBusSearchOptions;
var e=b.recordsPerPage,f=b.pageNum;if(MSISCheckError.judgeParameter(e,"number","recordsPerPage",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(f,"number","pageNum",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(d,"string","city",this.callbackFunctionName,7))if(MSISCheckError.judgeParameter(a,"string","busId",this.callbackFunctionName,7)){var g=b.resData;if(MSISCheckError.judgeParameter(g,"number","resData",this.callbackFunctionName,4)){var h=b.resType;d=encodeURI(d);
var i=this.serverUrl;i+="&config=BusLine&ver=2.0&ids="+a+"&cityCode="+d+"&enc=utf-8&resType="+h+"&resData="+g+"&a_k="+c+"&number="+e+"&batch="+f;var j=new MAjaxRequest;if(i.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{j.setResponseHandler(this.callbackFunctionName,this);if(b.requestMethod.toLowerCase()=="get")j.sendRequest(i,null,null,null);else if(b.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){j.sendPostRequest(i,null,null,null)});else if(!isIE())if(true){a=
false;setTimeout(function(){j.sendPostRequest(i,null,null,null)},300)}else j.sendPostRequest(i,null,null,null)}}}}}};MBusSearch.prototype.busSearchByBusStation=function(a,d,b){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var c;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;c=getMASAValidateKey()}else{c=MSISGetKey("asaCore.js");
if(c==undefined)c=""}d=MSISCheckError.treatCityCodes(d);d=encodeURI(d);a=encodeURI(a);if(MSISCheckError.judgeParameter(d,"string","city",this.callbackFunctionName,7))if(MSISCheckError.judgeParameter(a,"string","stationName",this.callbackFunctionName,7)){if(b==null||b==undefined||b=="")b=new MBusSearchOptions;var e=b.resData;if(MSISCheckError.judgeParameter(e,"number","resData",this.callbackFunctionName,4)){var f=b.recordsPerPage,g=b.pageNum;if(MSISCheckError.judgeParameter(f,"number","recordsPerPage",
this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(g,"number","pageNum",this.callbackFunctionName,4)){var h=this.serverUrl;h+="&config=BusLine&ver=2.0&stationName="+a+"&cityCode="+d+"&enc=utf-8&resType="+b.resType+"&resData="+e+"&a_k="+c+"&number="+f+"&batch="+g;var i=new MAjaxRequest;if(h.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{i.setResponseHandler(this.callbackFunctionName,this);if(b.requestMethod.toLowerCase()=="get")i.sendRequest(h,null,null,null);else if(b.requestMethod.toLowerCase()==
"post"){initFP_();if(isIE())setTimeout(function(){i.sendPostRequest(h,null,null,null)});else if(!isIE())if(true){a=false;setTimeout(function(){i.sendPostRequest(h,null,null,null)},300)}else i.sendPostRequest(h,null,null,null)}}}}}}};MBusSearch.prototype.busSearchByBusName=function(a,d,b){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var c;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);
return}if(isAccess(this.callbackFunctionName))return;c=getMASAValidateKey()}else{c=MSISGetKey("asaCore.js");if(c==undefined)c=""}d=MSISCheckError.treatCityCodes(d);a=encodeURI(a);if(MSISCheckError.judgeParameter(d,"string","city",this.callbackFunctionName,7))if(MSISCheckError.judgeParameter(a,"string","busLineName",this.callbackFunctionName,7)){d=encodeURI(d);if(b==null||b==undefined||b=="")b=new MBusSearchOptions;var e=b.resData;if(MSISCheckError.judgeParameter(e,"number","resData",this.callbackFunctionName,
4)){var f=b.recordsPerPage,g=b.pageNum;if(MSISCheckError.judgeParameter(f,"number","recordsPerPage",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(g,"number","pageNum",this.callbackFunctionName,4)){var h=this.serverUrl;h+="&config=BusLine&ver=2.0&busName="+a+"&cityCode="+d+"&enc=utf-8&resType="+b.resType+"&resData="+e+"&a_k="+c+"&number="+f+"&batch="+g;var i=new MAjaxRequest;if(h.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{i.setResponseHandler(this.callbackFunctionName,
this);if(b.requestMethod.toLowerCase()=="get")i.sendRequest(h,null,null,null);else if(b.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){i.sendPostRequest(h,null,null,null)});else if(!isIE())if(true){a=false;setTimeout(function(){i.sendPostRequest(h,null,null,null)},300)}else i.sendPostRequest(h,null,null,null)}}}}}}}}
if(typeof MBusSearchOptions=="undefined"){MBusSearchOptions=function(){};MBusSearchOptions.prototype.per=150;MBusSearchOptions.prototype.resType="json";MBusSearchOptions.prototype.enc="utf-8";MBusSearchOptions.prototype.routeType=0;MBusSearchOptions.prototype.resData=0;MBusSearchOptions.prototype.requestMethod="get";MBusSearchOptions.prototype.recordsPerPage=10;MBusSearchOptions.prototype.pageNum=1}
if(typeof MGeoCode=="undefined"){MGeoCode=function(){if(MNoCheckKeyFlag){var a=MSISGetKey("asaCore.js");MSearchDummy.availabilityKey(a,false)}};MGeoCode.prototype.key="netuser";MGeoCode.prototype.pos="netuser";MGeoCode.prototype.serverUrl="http://api.mapabc.com/api/redirect.do?";MGeoCode.prototype.callbackFunctionName=null;MGeoCode.prototype.setCallbackFunction=function(a){MGeoCode.prototype.callbackFunctionName=a};MGeoCode.prototype.addressToGeocode=function(a,d,b,c){var e=this;setTimeout(function(){if(e.callbackFunctionName==
null||e.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var f;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(e.callbackFunctionName);return}if(isAccess(e.callbackFunctionName))return;f=getMASAValidateKey()}else{f=MSISGetKey("asaCore.js");if(f==undefined)f=""}c||(c=new MGeocodeOptions);var g=c.returnCoordType;if(g==0)g=1;else if(g==1)g=0;if(MSISCheckError.judgeParameter(a,"string","cityName",e.callbackFunctionName,7))if(MSISCheckError.judgeParameter(d,
"string","address",e.callbackFunctionName,7))if(MSISCheckError.judgeParameter(b,"string","poiName",e.callbackFunctionName,7)){var h=navigator.userAgent.toLowerCase(),i={};i.br=h;i.br=encodeURI(i.br);h=new MAjaxRequest;a=encodeURI(a);d=encodeURI(d);b=encodeURI(b);f=e.serverUrl+"&a_br="+i.br+"&a_k="+f+"&type="+g+"&username="+e.key+"&password="+e.pos+"&city="+a+"&address="+d+"&name="+b;if(f.length+35>=2048)checkUrlLength(e.callbackFunctionName);else{h.setResponseHandler(e.innerCallback,e);h.sendRequest(f,
"","","")}}}})};MGeoCode.prototype.innerCallback=function(a){if(a==null||a==""){alert("\u67e5\u627e\u54cd\u5e94\u5185\u5bb9\u5931\u8d25!");return false}var d=new MGeocodeOptions,b=[];b[0]="city";b[1]="district";b[2]="street";b[3]="streetno";b[4]="building";b[5]="longitude";b[6]="latitude";b[7]="grade";b[8]="matchname";b[9]="dismatch";a.indexOf(b[0]+"=");a.indexOf(b[1]+"=");a.indexOf(b[1]+"=");a.indexOf(b[2]+"=");a.indexOf(b[2]+"=");a.indexOf(b[3]+"=");a.indexOf(b[3]+"=");a.indexOf(b[4]+"=");a.indexOf(b[4]+
"=");a.indexOf(b[5]+"=");var c=a.indexOf(b[5]+"=")+(b[5]+"=").length,e=a.indexOf(b[6]+"="),f=a.indexOf(b[6]+"=")+(b[6]+"=").length,g=a.indexOf(b[7]+"="),h=a.indexOf(b[7]+"=")+(b[7]+"=").length,i=a.indexOf(b[8]+"=");a.indexOf(b[8]+"=");a.indexOf(b[9]+"=");a.indexOf(b[9]+"=");b=a.substring(c,e);if(b!=null)d.longitude=b;f=a.substring(f,g);if(f!=null)d.latitude=f;a=a.substring(h,i);if(a!=null)d.grade=a;this.callbackFunctionName.call(this,d)}}
if(typeof MGeocodeOptions=="undefined"){MGeocodeOptions=function(){};MGeocodeOptions.prototype.returnCoordType=0;MGeocodeOptions.prototype.address="";MGeocodeOptions.prototype.longitude=null;MGeocodeOptions.prototype.latitude=null;MGeocodeOptions.prototype.grade=null;MGeocodeOptions.prototype.name=null}
if(typeof MGeoCodeSearch=="undefined"){MGeoCodeSearch=function(){if(MNoCheckKeyFlag){var a=MSISGetKey("asaCore.js");MSearchDummy.availabilityKey(a,false,1)}};MGeoCodeSearch.prototype.callbackFunctionName=null;MGeoCodeSearch.prototype.serverUrl=MSISServerAddress+"highLight=false";MGeoCodeSearch.prototype.setCallbackFunction=function(a){this.callbackFunctionName=a};MGeoCodeSearch.prototype.addressToGeocode=function(a,d){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");
else{var b;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;b=getMASAValidateKey()}else{b=MSISGetKey("asaCore.js");if(b==undefined)b=""}if(d==null||d==undefined||d=="")d=new MGeoCodeSearchOptions;if(MSISCheckError.judgeParameter(a,"string","address",this.callbackFunctionName,7)){a=encodeURI(a);var c=this.serverUrl;c+="&config=GOC&address="+a+"&resType="+d.resType+"&enc=utf-8&a_k="+b;var e=new MAjaxRequest;if(c.length+35>=
2048)checkUrlLength(this.callbackFunctionName);else{e.setResponseHandler(this.callbackFunctionName,this);if(d.requestMethod.toLowerCase()=="get")e.sendRequest(c,null,null,null);else if(d.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){e.sendPostRequest(c,null,null,null)});else if(!isIE())if(true){b=false;setTimeout(function(){e.sendPostRequest(c,null,null,null)},300)}else e.sendPostRequest(c,null,null,null)}}}}}}
if(typeof MGeoCodeSearchOptions=="undefined"){MGeoCodeSearchOptions=function(){};MGeoCodeSearchOptions.prototype.resType="json";MGeoCodeSearchOptions.prototype.enc="utf-8";MGeoCodeSearchOptions.prototype.requestMethod="get"}
if(typeof MReGeoCodeSearch=="undefined"){MReGeoCodeSearch=function(a){if(msisFlag=a==1?false:true)if(MNoCheckKeyFlag){a=MSISGetKey("asaCore.js");MSearchDummy.availabilityKey(a,false,1)}};MReGeoCodeSearch.prototype.callbackFunctionName=null;MReGeoCodeSearch.prototype.serverUrl=MSISServerAddress+"highLight=false";MReGeoCodeSearch.prototype.setCallbackFunction=function(a){this.callbackFunctionName=a};MReGeoCodeSearch.prototype.poiToAddress=function(a,d){if(this.callbackFunctionName==null||this.callbackFunctionName==
undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var b;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;b=getMASAValidateKey()}else{b=MSISGetKey("asaCore.js");if(b==undefined)b=""}if(d==null||d==undefined||d=="")d=new MReGeoCodeSearchOptions;if(!MSISCheckError.judgeMLngLat(a,this.callbackFunctionName,"poiXY")){var c=d.resType;d.poiXY=a;d.method="searchPoint";var e=this.createXML(d);if(e!=undefined){e=
e.replace('<?xml version="1.0"?>','<?xml version="1.0" encoding="gb2312"?>');e=encodeURI(e);var f=this.serverUrl;f+="&config=SPAS&ver=2.0&resType="+c+"&enc=utf-8&spatialXml="+e+"&a_k="+b;var g=new MAjaxRequest;if(f.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{g.setResponseHandler(this.callbackFunctionName,this);if(d.requestMethod.toLowerCase()=="get")g.sendRequest(f,null,null,null);else if(d.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){g.sendPostRequest(f,
null,null,null)});else if(!isIE())if(true){b=false;setTimeout(function(){g.sendPostRequest(f,null,null,null)},300)}else g.sendPostRequest(f,null,null,null)}}}}}};MReGeoCodeSearch.prototype.multiPoiToAddress=function(a,d){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var b;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;b=getMASAValidateKey()}else{b=
MSISGetKey("asaCore.js");if(b==undefined)b=""}if(d==null||d==undefined||d=="")d=new MReGeoCodeSearchOptions;if(!MSISCheckError.judgeMLngLats(a,this.callbackFunctionName,"multiXY")){var c=d.resType;d.multiXY=a;d.method="searchPoints";var e=this.createXML(d);if(e!=undefined){e=e.replace('<?xml version="1.0"?>','<?xml version="1.0" encoding="gb2312"?>');e=encodeURI(e);var f=this.serverUrl;f+="&config=SPAS&ver=2.0&resType="+c+"&enc=utf-8&spatialXml="+e+"&a_k="+b;var g=new MAjaxRequest;if(f.length+35>=
2048)checkUrlLength(this.callbackFunctionName);else{g.setResponseHandler(this.callbackFunctionName,this);if(d.requestMethod.toLowerCase()=="get")g.sendRequest(f,null,null,null);else if(d.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){g.sendPostRequest(f,null,null,null)});else if(!isIE())if(true){b=false;setTimeout(function(){g.sendPostRequest(f,null,null,null)},300)}else g.sendPostRequest(f,null,null,null)}}}}}};MReGeoCodeSearch.prototype.poiToAddressSimple=function(a,
d){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var b;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;b=getMASAValidateKey()}else{b=MSISGetKey("asaCore.js");if(b==undefined)b=""}if(d==null||d==undefined||d=="")d=new MReGeoCodeSearchOptions;if(!MSISCheckError.judgeMLngLat(a,this.callbackFunctionName,"poiXY")){var c="",e="";if(a instanceof
MLngLat||a.lngX&&a.latY){c=a.lngX;e=a.latY}var f=this.serverUrl;f+="&config=POSDES&ver=2.0&resType="+d.resType+"&enc=utf-8&x1="+c+"&y1="+e+"&a_k="+b;var g=new MAjaxRequest;if(f.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{g.setResponseHandler(this.callbackFunctionName,this);if(d.requestMethod.toLowerCase()=="get")g.sendRequest(f,null,null,null);else if(d.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){g.sendPostRequest(f,null,null,null)});else if(!isIE())if(true){b=
false;setTimeout(function(){g.sendPostRequest(f,null,null,null)},300)}else g.sendPostRequest(f,null,null,null)}}}}};MReGeoCodeSearch.prototype.createXML=function(a){var d=a.multiXY,b=a.poiXY,c=a.method,e=a.poiNumber,f=a.range,g=a.pattern,h=a.roadLevel;a=a.exkey;if(MSISCheckError.judgeParameter(e,"number","poiNumber",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(f,"number","range",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(g,"number","pattern",this.callbackFunctionName,
4))if(MSISCheckError.judgeParameter(h,"number","roadLevel",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(a,"string","exkey",this.callbackFunctionName,6)){var i="",j="";if(d)if(d instanceof MLngLats||d.lnglatArr){d=d.lnglatArr;for(var k=0;k<d.length;k++)if(d[k]instanceof MLngLat||d[k].lngX&&d[k].latY){var l=d[k];i+=l.lngX+",";j+=l.latY+","}}k=d="";if(b)if(b instanceof MLngLat||b.lngX&&b.latY){d=b.lngX;k=b.latY}if(navigator.appName=="Microsoft Internet Explorer"){xmlDoc=new ActiveXObject("Msxml2.DOMDocument.3.0");
b=xmlDoc.createProcessingInstruction("xml","version='1.0' encoding='gb2312'");xmlDoc.appendChild(b);b=xmlDoc.documentElement;b=xmlDoc.createNode(1,"spatial_request","");l=xmlDoc.createAttribute("method");l.value=c;b.setAttributeNode(l);createSimpleNode("x",d,b,xmlDoc);createSimpleNode("y",k,b,xmlDoc);createSimpleNode("xs",i,b,xmlDoc);createSimpleNode("ys",j,b,xmlDoc);createSimpleNode("poiNumber",e.toString(),b,xmlDoc);createSimpleNode("range",f.toString(),b,xmlDoc);createSimpleNode("pattern",g.toString(),
b,xmlDoc);createSimpleNode("roadLevel",h.toString(),b,xmlDoc);createSimpleNode("exkey",a,b,xmlDoc);xmlDoc.appendChild(b);return b.ownerDocument.xml}else{l=parseXML('<?xml version="1.0"?><spatial_request />');b=l.firstChild;b.setAttribute("method",c.toString());createSimpleNode("x",d,b,l);createSimpleNode("y",k,b,l);createSimpleNode("xs",i,b,l);createSimpleNode("ys",j,b,l);createSimpleNode("poiNumber",e.toString(),b,l);createSimpleNode("range",f.toString(),b,l);createSimpleNode("pattern",g.toString(),
b,l);createSimpleNode("roadLevel",h.toString(),b,l);createSimpleNode("exkey",a,b,l);return nodeToString(l)}}}}
if(typeof MReGeoCodeSearchOptions=="undefined"){MReGeoCodeSearchOptions=function(){};MReGeoCodeSearchOptions.prototype.resType="json";MReGeoCodeSearchOptions.prototype.enc="utf-8";MReGeoCodeSearchOptions.prototype.poiNumber=10;MReGeoCodeSearchOptions.prototype.range=3E3;MReGeoCodeSearchOptions.prototype.pattern=0;MReGeoCodeSearchOptions.prototype.roadLevel=0;MReGeoCodeSearchOptions.prototype.exkey="";MReGeoCodeSearchOptions.prototype.requestMethod="get";MReGeoCodeSearchOptions.prototype.multiXY=null;
MReGeoCodeSearchOptions.prototype.poiXY=null;MReGeoCodeSearchOptions.prototype.method=""}
if(typeof MRoadSearch=="undefined"){MRoadSearch=function(a){if(msisFlag=a==1?false:true)if(MNoCheckKeyFlag){a=MSISGetKey("asaCore.js");MSearchDummy.availabilityKey(a,false,1)}};MRoadSearch.prototype.callbackFunctionName=null;MRoadSearch.prototype.serverUrl=MSISServerAddress+"highLight=false";MRoadSearch.prototype.setCallbackFunction=function(a){this.callbackFunctionName=a};MRoadSearch.prototype.roadSearchByRoadName=function(a,d,b){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");
else{var c;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;c=getMASAValidateKey()}else{c=MSISGetKey("asaCore.js");if(c==undefined)c=""}if(b==null||b==undefined||b=="")b=new MRoadSearchOptions;if(MSISCheckError.judgeParameter(a,"string","roadName",this.callbackFunctionName,7))if(MSISCheckError.judgeParameter(d,"string","city",this.callbackFunctionName,7)){var e=b.rexy,f=b.resType;b.cityCode=d;b.roadName=a;b.method="searchRoadName";
a=this.createXML(b);if(a!=undefined){a=a.replace('<?xml version="1.0"?>','<?xml version="1.0" encoding="gb2312"?>');a=encodeURI(a);var g=this.serverUrl;g+="&config=SPAS&resType="+f+"&enc=utf-8&spatialXml="+a+"&a_k="+c+"&rexy="+e;var h=new MAjaxRequest;if(g.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{h.setResponseHandler(this.callbackFunctionName,this);if(b.requestMethod.toLowerCase()=="get")h.sendRequest(g,null,null,null);else if(b.requestMethod.toLowerCase()=="post"){initFP_();
if(isIE())setTimeout(function(){h.sendPostRequest(g,null,null,null)});else if(!isIE())if(true){b=false;setTimeout(function(){h.sendPostRequest(g,null,null,null)},300)}else h.sendPostRequest(g,null,null,null)}}}}}};MRoadSearch.prototype.roadCrossSearchByRoadId=function(a,d,b,c){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var e;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;
e=getMASAValidateKey()}else{e=MSISGetKey("asaCore.js");if(e==undefined)e=""}if(c==null||c==undefined||c=="")c=new MRoadSearchOptions;if(MSISCheckError.judgeParameter(b,"string","city",this.callbackFunctionName,7))if(MSISCheckError.judgeParameter(a,"string","roadId1",this.callbackFunctionName,7))if(MSISCheckError.judgeParameter(d,"string","roadId2",this.callbackFunctionName,7)){c.id1=a;c.id2=d;c.cityCode=b;c.method="searchRoadIntersection";a=c.resType;d=this.createXML(c);if(d!=undefined){d=d.replace('<?xml version="1.0"?>',
'<?xml version="1.0" encoding="gb2312"?>');d=encodeURI(d);var f=this.serverUrl;f+="&config=SPAS&ver=2.0&resType="+a+"&enc=utf-8&spatialXml="+d+"&a_k="+e;var g=new MAjaxRequest;if(f.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{g.setResponseHandler(this.callbackFunctionName,this);if(c.requestMethod.toLowerCase()=="get")g.sendRequest(f,null,null,null);else if(c.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){g.sendPostRequest(f,null,null,null)});else if(!isIE())if(true){c=
false;setTimeout(function(){g.sendPostRequest(f,null,null,null)},300)}else g.sendPostRequest(f,null,null,null)}}}}}};MRoadSearch.prototype.roadCrossSearchByRoadName=function(a,d,b,c){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var e;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;e=getMASAValidateKey()}else{e=MSISGetKey("asaCore.js");
if(e==undefined)e=""}if(c==null||c==undefined||c=="")c=new MRoadSearchOptions;if(MSISCheckError.judgeParameter(b,"string","city",this.callbackFunctionName,7))if(MSISCheckError.judgeParameter(a,"string","roadName1",this.callbackFunctionName,7))if(MSISCheckError.judgeParameter(d,"string","roadName2",this.callbackFunctionName,7)){var f=c.resType;c.roadName1=a;c.roadName2=d;c.cityCode=b;c.method="searchRoadIntersectorByName";a=this.createXML(c);if(a!=undefined){a=a.replace('<?xml version="1.0"?>','<?xml version="1.0" encoding="gb2312"?>');
a=encodeURI(a);var g=this.serverUrl;g+="&config=SPAS&ver=2.0&resType="+f+"&enc=utf-8&spatialXml="+a+"&a_k="+e;var h=new MAjaxRequest;if(g.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{h.setResponseHandler(this.callbackFunctionName,this);if(c.requestMethod.toLowerCase()=="get")h.sendRequest(g,null,null,null);else if(c.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){h.sendPostRequest(g,null,null,null)});else if(!isIE())if(true){c=false;setTimeout(function(){h.sendPostRequest(g,
null,null,null)},300)}else h.sendPostRequest(g,null,null,null)}}}}}};MRoadSearch.prototype.allRoadCrossSearchByRoadName=function(a,d,b){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var c;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;c=getMASAValidateKey()}else{c=MSISGetKey("asaCore.js");if(c==undefined)c=""}if(b==null||b==
undefined||b=="")b=new MRoadSearchOptions;if(MSISCheckError.judgeParameter(a,"string","roadName",this.callbackFunctionName,7))if(MSISCheckError.judgeParameter(d,"string","city",this.callbackFunctionName,7)){var e=b.resType;b.roadName=a;b.cityCode=d;b.method="searchAllIntersectionByRoadName";a=this.createXML(b);if(a!=undefined){a=a.replace('<?xml version="1.0"?>','<?xml version="1.0" encoding="gb2312"?>');a=encodeURI(a);var f=this.serverUrl;f+="&config=SPAS&ver=2.0&resType="+e+"&enc=utf-8&spatialXml="+
a+"&a_k="+c;var g=new MAjaxRequest;if(f.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{g.setResponseHandler(this.callbackFunctionName,this);if(b.requestMethod.toLowerCase()=="get")g.sendRequest(f,null,null,null);else if(b.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){g.sendPostRequest(f,null,null,null)});else if(!isIE())if(true){b=false;setTimeout(function(){g.sendPostRequest(f,null,null,null)},300)}else g.sendPostRequest(f,null,null,null)}}}}}};MRoadSearch.prototype.createXML=
function(a){var d=a.roadLevel,b=a.keyType,c=a.sortRule,e=a.roadName,f=a.roadName1,g=a.roadName2,h=a.id1,i=a.id2,j=a.method,k=a.cityCode;a=a.buffer;if(MSISCheckError.judgeParameter(d,"number","roadLevel",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(a,"number","buffer",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(c,"number","sortRule",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(b,"string","keyType",this.callbackFunctionName,6))if(navigator.appName==
"Microsoft Internet Explorer"){xmlDoc=new ActiveXObject("Msxml2.DOMDocument.3.0");var l=xmlDoc.createProcessingInstruction("xml","version='1.0' encoding='gb2312'");xmlDoc.appendChild(l);l=xmlDoc.documentElement;l=xmlDoc.createNode(1,"spatial_request","");var n=xmlDoc.createAttribute("method");n.value=j;l.setAttributeNode(n);createSimpleNode("cityCode",k,l,xmlDoc);createSimpleNode("roadName1",f,l,xmlDoc);createSimpleNode("roadName2",g,l,xmlDoc);createSimpleNode("id1",h,l,xmlDoc);createSimpleNode("id2",
i,l,xmlDoc);j=="searchAllIntersectionByRoadName"&&createSimpleNode("roadkey",e,l,xmlDoc);if(j=="searchRoadName"){createSimpleNode("roadName",e,l,xmlDoc);createSimpleNode("buffer",a,l,xmlDoc)}createSimpleNode("roadLevel",d.toString(),l,xmlDoc);createSimpleNode("keyType",b,l,xmlDoc);createSimpleNode("sortRule",c.toString(),l,xmlDoc);xmlDoc.appendChild(l);return l.ownerDocument.xml}else{n=parseXML('<?xml version="1.0"?><spatial_request />');l=n.firstChild;l.setAttribute("method",j.toString());createSimpleNode("cityCode",
k,l,n);createSimpleNode("roadName1",f,l,n);createSimpleNode("roadName2",g,l,n);createSimpleNode("id1",h,l,n);createSimpleNode("id2",i,l,n);if(j=="searchRoadName"){createSimpleNode("roadName",e,l,n);createSimpleNode("buffer",a,l,n)}createSimpleNode("roadLevel",d.toString(),l,n);j=="searchAllIntersectionByRoadName"&&createSimpleNode("roadkey",e,l,n);createSimpleNode("keyType",b,l,n);createSimpleNode("sortRule",c.toString(),l,n);return nodeToString(n)}}}
if(typeof MRoadSearchOptions=="undefined"){MRoadSearchOptions=function(){};MRoadSearchOptions.prototype.resType="json";MRoadSearchOptions.prototype.enc="utf-8";MRoadSearchOptions.prototype.roadLevel=0;MRoadSearchOptions.prototype.keyType="";MRoadSearchOptions.prototype.sortRule=0;MRoadSearchOptions.prototype.requestMethod="get";MRoadSearchOptions.prototype.buffer=3E3;MRoadSearchOptions.prototype.rexy=true;MRoadSearchOptions.prototype.roadName="";MRoadSearchOptions.prototype.roadName1="";MRoadSearchOptions.prototype.roadName2=
"";MRoadSearchOptions.prototype.id1="";MRoadSearchOptions.prototype.id2="";MRoadSearchOptions.prototype.cityCode="";MRoadSearchOptions.prototype.method=""}
if(typeof MSpatialSearch=="undefined"){MSpatialSearch=function(a){if(msisFlag=a==1?false:true)if(MNoCheckKeyFlag){a=MSISGetKey("asaCore.js");MSearchDummy.availabilityKey(a,false,1)}};MSpatialSearch.rectangle="rect";MSpatialSearch.polygon="polygon";MSpatialSearch.circle="circle";MSpatialSearch.prototype.rectangle="rect";MSpatialSearch.prototype.polygon="polygon";MSpatialSearch.prototype.circle="circle";MSpatialSearch.prototype.callbackFunctionName=null;MSpatialSearch.prototype.serverUrl=MSISServerAddress+
"highLight=false";MSpatialSearch.prototype.setCallbackFunction=function(a){this.callbackFunctionName=a};MSpatialSearch.prototype.spatialSearchByLine=function(a,d,b,c){c||(c=new MSpatialSearchOptions);var e=new MPoiSearch(1),f=new MPoiSearchOptions;f.resType=c.returnType;f.cenXY=c.centerXY;e.setCallbackFunction(this.callbackFunctionName);e.poiSearchByLine(b,d,a,f)};MSpatialSearch.prototype.spatialSearchByRegion=function(a,d,b,c){c||(c=new MSpatialSearchOptions);var e=new MPoiSearch(1),f=new MPoiSearchOptions;
f.dataType=c.dataType;f.dataSources=c.dataSources;f.resType=c.returnType;f.recordsPerPage=c.recordsPerPage;f.pageNum=c.pageNum;f.buffer=c.buffer;e.setCallbackFunction(this.callbackFunctionName);e.poiSearchByRegion(a,b,d,f)};MSpatialSearch.prototype.geocodeToAddress=function(a,d){d||(d=new MSpatialSearchOptions);var b=new MReGeoCodeSearch(1),c=new MReGeoCodeSearchOptions;c.resType=d.returnType;c.poiNumber=d.Number;c.range=d.range;c.level=d.roadLevel;c.requestMethod=d.requestMethod;b.setCallbackFunction(this.callbackFunctionName);
b.poiToAddress(a,c)};MSpatialSearch.prototype.spatialSearchByRoadName=function(a,d,b){b||(b=new MSpatialSearchOptions);var c=new MRoadSearch(1),e=new MRoadSearchOptions;e.roadLevel=b.roadLevel;e.resType=b.returnType;e.requestMethod=b.requestMethod;c.setCallbackFunction(this.callbackFunctionName);c.roadSearchByRoadName(d,a,e)};MSpatialSearch.prototype.intersectionsSearchByTwoRoadName=function(a,d,b,c){c||(c=new MSpatialSearchOptions);var e=new MRoadSearch(1),f=new MRoadSearchOptions;f.roadLevel=c.roadLevel;
f.resType=c.returnType;f.requestMethod=c.requestMethod;e.setCallbackFunction(this.callbackFunctionName);e.roadCrossSearchByRoadName(d,b,a,f)};MSpatialSearch.prototype.intersectionsSearchByRoadName=function(a,d,b){b||(b=new MSpatialSearchOptions);var c=new MRoadSearch(1),e=new MRoadSearchOptions;e.roadLevel=b.roadLevel;e.resType=b.returnType;e.requestMethod=b.requestMethod;c.setCallbackFunction(this.callbackFunctionName);c.allRoadCrossSearchByRoadName(d,a,e)};MSpatialSearch.prototype.calculaDistance=
function(a,d,b,c){if(b==null&&a!=null&&d!=null)return this.calculationP2PDistance(a,d,c);else if(d==null&&a!=null&&b!=null)return this.calculationP2LDistance(a,b,c);else if(d==null&&a==null&&b!=null)return this.calculationLineDistance(b,c)};MSpatialSearch.prototype.calculationP2PDistance=function(a,d,b){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var c;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);
return}if(isAccess(this.callbackFunctionName))return;c=getMASAValidateKey()}else{c=MSISGetKey("asaCore.js");if(c==undefined)c=""}if(b==null||b==undefined||b=="")b=new MSpatialSearchOptions;var e="",f="",g="",h="";if(!MSISCheckError.judgeMLngLat(a,this.callbackFunctionName,"poiXY1"))if(!MSISCheckError.judgeMLngLat(d,this.callbackFunctionName,"poiXY2")){var i=b.resType;if(a)if(a instanceof MLngLat||a.lngX&&a.latY){e=a.lngX;f=a.latY}if(d)if(d instanceof MLngLat||d.lngX&&d.latY){g=d.lngX;h=d.latY}var j=
this.serverUrl;j+="&config=CDX&ver=2.0&x1="+e+"&y1="+f+"&x2="+g+"&y2="+h+"&enc=utf-8&resType="+i+"&a_k="+c;var k=new MAjaxRequest;if(j.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{k.setResponseHandler(this.callbackFunctionName,this);if(b.requestMethod.toLowerCase()=="get")k.sendRequest(j,null,null,null);else if(b.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){k.sendPostRequest(j,null,null,null)});else if(!isIE())if(true){a=false;setTimeout(function(){k.sendPostRequest(j,
null,null,null)},300)}else k.sendPostRequest(j,null,null,null)}}}}};MSpatialSearch.prototype.calculationP2LDistance=function(a,d,b){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var c;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;c=getMASAValidateKey()}else{c=MSISGetKey("asaCore.js");if(c==undefined)c=""}if(b==null||b==undefined||
b=="")b=new MSpatialSearchOptions;if(!MSISCheckError.judgeMLngLat(a,this.callbackFunctionName,"poiXY1"))if(!MSISCheckError.judgeMLngLats(d,this.callbackFunctionName,"lineXY")){var e=b.resType,f="",g="";if(a instanceof MLngLat){f=a.lngX;g=a.latY}var h=a="";if(d instanceof MLngLats||d.lnglatArr){d=d.lnglatArr;for(var i=0;i<d.length;i++)if(d[i]instanceof MLngLat||d[i].lngX&&d[i].latY){var j=d[i];a+=j.lngX+",";h+=j.latY+","}}var k=this.serverUrl;k+="&config=CDX&ver=2.0&x1="+f+"&y1="+g+"&xs="+a+"&ys="+
h+"&enc=utf-8&resType="+e+"&a_k="+c;var l=new MAjaxRequest;if(k.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{l.setResponseHandler(this.callbackFunctionName,this);if(b.requestMethod.toLowerCase()=="get")l.sendRequest(k,null,null,null);else if(b.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){l.sendPostRequest(k,null,null,null)});else if(!isIE())if(true){b=false;setTimeout(function(){l.sendPostRequest(k,null,null,null)},300)}else l.sendPostRequest(k,
null,null,null)}}}}};MSpatialSearch.prototype.calculationLineDistance=function(a,d){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var b;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;b=getMASAValidateKey()}else{b=MSISGetKey("asaCore.js");if(b==undefined)b=""}if(d==null||d==undefined||d=="")d=new MSpatialSearchOptions;if(!MSISCheckError.judgeMLngLats(a,
this.callbackFunctionName,"lineXY")){var c=d.resType,e="",f="";if(a instanceof MLngLats||a.lnglatArr)for(var g=a.lnglatArr,h=0;h<g.length;h++)if(g[h]instanceof MLngLat||g[h].lngX&&g[h].latY){var i=g[h];e+=i.lngX+",";f+=i.latY+","}var j=this.serverUrl;j+="&config=CDX&ver=2.0&xs="+e+"&ys="+f+"&enc=utf-8&resType="+c+"&a_k="+b;var k=new MAjaxRequest;if(j.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{k.setResponseHandler(this.callbackFunctionName,this);if(d.requestMethod.toLowerCase()==
"get")k.sendRequest(j,null,null,null);else if(d.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){k.sendPostRequest(j,null,null,null)});else if(!isIE())if(true){b=false;setTimeout(function(){k.sendPostRequest(j,null,null,null)},300)}else k.sendPostRequest(j,null,null,null)}}}}};MSpatialSearch.prototype.isPoiInRegion=function(a,d,b,c){if(d instanceof MLngLats||d.lnglatArr)this.isMultiPoiInRegion(a,d,b,c);else if(this.callbackFunctionName==null||this.callbackFunctionName==
undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var e;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;e=getMASAValidateKey()}else{e=MSISGetKey("asaCore.js");if(e==undefined)e=""}if(c==null||c==undefined||c=="")c=new MSpatialSearchOptions;var f=c.resType;if(!MSISCheckError.judgeMLngLats(b,this.callbackFunctionName,"regionXY"))if(!MSISCheckError.judgeMLngLat(d,this.callbackFunctionName,"poiXY"))if(MSISCheckError.judgeParameter(a,
"string","regionType",this.callbackFunctionName,7)){c.regionType=a;c.poiXY=d;c.regionXY=b;c.method="surveyByXY";a=this.createXML(c);if(a!=undefined){a=a.replace('<?xml version="1.0"?>','<?xml version="1.0" encoding="gb2312"?>');a=encodeURI(a);var g=this.serverUrl;g+="&config=SPAS&ver=2.0&resType="+f+"&enc=utf-8&spatialXml="+a+"&a_k="+e;var h=new MAjaxRequest;if(g.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{h.setResponseHandler(this.callbackFunctionName,this);if(c.requestMethod.toLowerCase()==
"get")h.sendRequest(g,null,null,null);else if(c.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){h.sendPostRequest(g,null,null,null)});else if(!isIE())if(true){c=false;setTimeout(function(){h.sendPostRequest(g,null,null,null)},300)}else h.sendPostRequest(g,null,null,null)}}}}}};MSpatialSearch.prototype.isMultiPoiInRegion=function(a,d,b,c){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");
else{var e;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;e=getMASAValidateKey()}else{e=MSISGetKey("asaCore.js");if(e==undefined)e=""}if(c==null||c==undefined||c=="")c=new MSpatialSearchOptions;var f=c.resType;if(!MSISCheckError.judgeMLngLats(b,this.callbackFunctionName,"regionXY"))if(!MSISCheckError.judgeMLngLats(d,this.callbackFunctionName,"multiPoiXY"))if(MSISCheckError.judgeParameter(a,"string","regionType",this.callbackFunctionName,
7)){c.regionType=a;c.multiXY=d;c.regionXY=b;c.method="surveyByXY";a=this.createXML(c);if(a!=undefined){a=a.replace('<?xml version="1.0"?>','<?xml version="1.0" encoding="gb2312"?>');a=encodeURI(a);var g=this.serverUrl;g+="&config=SPAS&ver=2.0&resType="+f+"&enc=utf-8&spatialXml="+a+"&a_k="+e;var h=new MAjaxRequest;if(g.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{h.setResponseHandler(this.callbackFunctionName,this);if(c.requestMethod.toLowerCase()=="get")h.sendRequest(g,null,null,
null);else if(c.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){h.sendPostRequest(g,null,null,null)});else if(!isIE())if(true){c=false;setTimeout(function(){h.sendPostRequest(g,null,null,null)},300)}else h.sendPostRequest(g,null,null,null)}}}}}};MSpatialSearch.prototype.spatialSearchByCenterXY=function(a,d){var b=this;setTimeout(function(){if(b.callbackFunctionName==null||b.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");
else{var c;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(b.callbackFunctionName);return}if(isAccess(b.callbackFunctionName))return;c=getMASAValidateKey()}else{c=MSISGetKey("asaCore.js");if(c==undefined)c=""}if(d==null||d==undefined||d=="")d=new MSpatialSearchOptions;var e=a.lngX+"",f=a.latY+"",g=d.range,h=d.Number,i=d.userId,j=d.dataSources,k=d.pageNum,l=d.recordsPerPage,n=d.returnType;if(MSISCheckError.judgeParameter(n,"string","returnType",b.callbackFunctionName,6))if(MSISCheckError.judgeParameter(e,
"string","CenterXY",b.callbackFunctionName,7))if(MSISCheckError.judgeParameter(f,"string","CenterXY",b.callbackFunctionName,7))if(MSISCheckError.judgeParameter(g,"number","range",b.callbackFunctionName,4))if(MSISCheckError.judgeParameter(h,"number","Number",b.callbackFunctionName,4))if(MSISCheckError.judgeParameter(i,"string","userId",b.callbackFunctionName,6))if(MSISCheckError.judgeParameter(j,"string","dataSources",b.callbackFunctionName,6))if(MSISCheckError.judgeParameter(k,"number","pageNum",
b.callbackFunctionName,4)){h=new MAjaxRequest;c=b.serverUrl+"&enc=utf-8&config=UOTS&cenX="+e+"&cenY="+f+"&range="+g+"&number="+l+"&batch="+k+"&a_k="+c+"&resType="+n;if(c.length+35>=2048)checkUrlLength(b.callbackFunctionName);else{h.setResponseHandler(b.callbackFunctionName,b);h.sendRequest(c,"","","")}}}})};MSpatialSearch.prototype.calculaBufferZone=function(a,d){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");
else{var b;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;b=getMASAValidateKey()}else{b=MSISGetKey("asaCore.js");if(b==undefined)b=""}if(d==null||d==undefined||d=="")d=new MSpatialSearchOptions;d.lineArr=a;d.method="countLineBuffer";var c=d.resType,e=this.createSpecialXML(d);if(e!=undefined){e=e.replace('<?xml version="1.0"?>','<?xml version="1.0" encoding="gb2312"?>');e=encodeURI(e);var f=this.serverUrl;f+="&config=LB&spatialXml="+
e+"&a_k="+b+"&resType="+c+"&enc=utf-8";var g=new MAjaxRequest;if(f.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{g.setResponseHandler(this.callbackFunctionName,this);if(d.requestMethod.toLowerCase()=="get")g.sendRequest(f,null,null,null);else if(d.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){g.sendPostRequest(f,null,null,null)});else if(!isIE())if(true){b=false;setTimeout(function(){g.sendPostRequest(f,null,null,null)},300)}else g.sendPostRequest(f,
null,null,null)}}}}};MSpatialSearch.prototype.createSpecialXML=function(a){var d=a.lineArr,b=a.range,c=a.buffer,e=a.method;a=[];for(var f=0;f<d.length;f++){for(var g=d[f].lnglatArr,h="",i=0;i<g.length;i++)if(g[i]instanceof MLngLat||g[i].lngX&&g[i].latY){var j=g[i];j=[j.lngX,j.latY].join(",");h+=i==g.length-1?j:j+","}a.push(h)}if(navigator.appName=="Microsoft Internet Explorer"){xmlDoc=new ActiveXObject("Msxml2.DOMDocument.3.0");d=xmlDoc.createProcessingInstruction("xml","version='1.0' encoding='gb2312'");
xmlDoc.appendChild(d);d=xmlDoc.documentElement;d=xmlDoc.createNode(1,"spatial_request","");f=xmlDoc.createAttribute("method");f.value=e;d.setAttributeNode(f);createSimpleNode("range",b.toString(),d,xmlDoc);f=xmlDoc.createNode(1,"spatial_geos","");b=xmlDoc.createAttribute("type");b.value="list";f.setAttributeNode(b);d.appendChild(f);for(b=0;b<a.length;b++){e=a[b];g=xmlDoc.createNode(1,"spatial_geo","");h=xmlDoc.createAttribute("type");h.value="Line";g.setAttributeNode(h);h=xmlDoc.createElement("coor");
h.text=e;g.appendChild(h);e=xmlDoc.createElement("buffer");e.text=c.toString();g.appendChild(e);f.appendChild(g)}xmlDoc.appendChild(d);return d.ownerDocument.xml}else{f=parseXML('<?xml version="1.0"?><spatial_request />');d=f.firstChild;d.setAttribute("method",e.toString());createSimpleNode("range",b.toString(),d,f);g=f.createElement("spatial_geos");g.setAttribute("type","list");d.appendChild(g);for(b=0;b<a.length;b++){e=a[b];d=f.createElement("spatial_geo");d.setAttribute("type","Line");h=f.createElement("coor");
e=f.createTextNode(e);h.appendChild(e);d.appendChild(h);e=f.createElement("buffer");h=f.createTextNode(c);e.appendChild(h);d.appendChild(e);g.appendChild(d)}return nodeToString(f)}};MSpatialSearch.prototype.createXML=function(a){var d=a.poiXY,b=a.multiXY,c=a.regionXY,e=a.regionType,f=a.method,g="",h="",i="",j="",k="",l=a.coorType;a=a.buffer;if(MSISCheckError.judgeParameter(l,"number","coorType",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(a,"number","buffer",this.callbackFunctionName,
4)){if(d)if(d instanceof MLngLat||d.lngX&&d.latY){g=d.lngX;h=d.latY}if(b)if(b instanceof MLngLats||b.lnglatArr){b=b.lnglatArr;for(var n=0;n<b.length;n++)if(b[n]instanceof MLngLat||b[n].lngX&&b[n].latY){var r=b[n];if(n==b.length-1){i+=r.lngX;j+=r.latY}else{i+=r.lngX+",";j+=r.latY+","}}}if(c instanceof MLngLats||c.lnglatArr){b=c.lnglatArr;if(e=="Rectangle"||e=="rectangle"||e=="Rect"||e=="rect"||e=="Circle"||e=="circle")for(c=0;c<b.length;c++){if(b[c]instanceof MLngLat||b[c].lngX&&b[c].latY){n=b[c];
n=[n.lngX,n.latY];n=n.join(";");k+=c==b.length-1?n:n+";"}}else for(c=0;c<b.length;c++)if(b[c]instanceof MLngLat||b[c].lngX&&b[c].latY){n=b[c];n=[n.lngX,n.latY];n=n.join(",");k+=c==b.length-1?n:n+","}}if(navigator.appName=="Microsoft Internet Explorer"){xmlDoc=new ActiveXObject("Msxml2.DOMDocument.3.0");b=xmlDoc.createProcessingInstruction("xml","version='1.0' encoding='gb2312'");xmlDoc.appendChild(b);b=xmlDoc.documentElement;b=xmlDoc.createNode(1,"spatial_request","");c=xmlDoc.createAttribute("method");
c.value=f;b.setAttributeNode(c);if(d){createSimpleNode("x",g,b,xmlDoc);createSimpleNode("y",h,b,xmlDoc)}else{createSimpleNode("xs",i,b,xmlDoc);createSimpleNode("ys",j,b,xmlDoc)}createSimpleNode("coorType",l.toString(),b,xmlDoc);createComplexNode(e,k,a.toString(),b,xmlDoc);xmlDoc.appendChild(b);return b.ownerDocument.xml}else{c=parseXML('<?xml version="1.0"?><spatial_request />');b=c.firstChild;b.setAttribute("method",f.toString());if(d){createSimpleNode("x",g,b,c);createSimpleNode("y",h,b,c)}else{createSimpleNode("xs",
i,b,c);createSimpleNode("ys",j,b,c)}createSimpleNode("coorType",l.toString(),b,c);createComplexNode(e,k,a.toString(),b,c);return nodeToString(c)}}}}
if(typeof MSpatialSearchOptions=="undefined"){MSpatialSearchOptions=function(){};MSpatialSearchOptions.prototype.resType="json";MSpatialSearchOptions.prototype.enc="utf-8";MSpatialSearchOptions.prototype.buffer=0;MSpatialSearchOptions.prototype.coorType=1;MSpatialSearchOptions.prototype.requestMethod="get";MSpatialSearchOptions.prototype.poiXY=null;MSpatialSearchOptions.prototype.multiXY=null;MSpatialSearchOptions.prototype.regionXY=null;MSpatialSearchOptions.prototype.regionType="";MSpatialSearchOptions.prototype.method=
"";MSpatialSearchOptions.prototype.lineArr=null;MSpatialSearchOptions.prototype.dataType="";MSpatialSearchOptions.prototype.range=3E3;MSpatialSearchOptions.prototype.Number=10;MSpatialSearchOptions.prototype.roadLevel=1;MSpatialSearchOptions.prototype.centerXY="";MSpatialSearchOptions.prototype.sign=1;MSpatialSearchOptions.prototype.recordsPerPage=10;MSpatialSearchOptions.prototype.pageNum=1;MSpatialSearchOptions.prototype.dataSources=MLocalSearch.BASE;MSpatialSearchOptions.prototype.userId="";MSpatialSearchOptions.prototype.rexy=
false;MSpatialSearchOptions.prototype.returnType="JSON";MSpatialSearchOptions.prototype.keyType="name";MSpatialSearchOptions.prototype.tempId=""}
if(typeof MCoordinateSearch=="undefined"){MCoordinateSearch=function(){if(MNoCheckKeyFlag){var a=MSISGetKey("asaCore.js");MSearchDummy.availabilityKey(a,false,1)}};MCoordinateSearch.prototype.callbackFunctionName=null;MCoordinateSearch.prototype.serverUrl=MSISServerAddress+"highLight=false";MCoordinateSearch.prototype.setCallbackFunction=function(a){this.callbackFunctionName=a};MCoordinateSearch.prototype.GPSToOffsetPost=function(a,d){if(this.callbackFunctionName==null||this.callbackFunctionName==
undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var b;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;b=getMASAValidateKey()}else{b=MSISGetKey("asaCore.js");if(b==undefined)b=""}if(d==null||d==undefined||d=="")d=new MCoordinateSearchOptions;if(!MSISCheckError.judgeMLngLats(a,this.callbackFunctionName,"multiPoiXY")){var c=d.resType,e=d.cr,f=d.ver,g=d.flag;if(MSISCheckError.judgeParameter(e,
"number","cr",this.callbackFunctionName,4)){var h="";if(a instanceof MLngLats||a.lnglatArr)for(var i=a.lnglatArr,j=0;j<i.length;j++)if(i[j]instanceof MLngLat||i[j].lngX&&i[j].latY){var k=i[j];k=[k.lngX.toString(),k.latY.toString()].join(",");h+=j==i.length-1?k:k+";"}var l=this.serverUrl;l+="&config=RGC&resType="+c+"&coors="+h+"&cr="+e+"&a_k="+b+"&ver="+f+"&flag="+g;var n=new MAjaxRequest;n.setResponseHandler(this.callbackFunctionName,this);initFP_();if(isIE())setTimeout(function(){n.sendPostRequest(l,
null,null,null)});else if(!isIE())if(true){b=false;setTimeout(function(){n.sendPostRequest(l,null,null,null)},300)}else n.sendPostRequest(l,null,null,null)}}}};MCoordinateSearch.prototype.GPSToOffsetGet=function(a,d,b){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var c;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;c=getMASAValidateKey()}else{c=
MSISGetKey("asaCore.js");if(c==undefined)c=""}if(b==null||b==undefined||b=="")b=new MCoordinateSearchOptions;if(!MSISCheckError.judgeMLngLat(a,this.callbackFunctionName,"poiXY1")){var e=b.resType,f=b.cr,g=b.ver;b=b.flag;if(MSISCheckError.judgeParameter(f,"number","cr",this.callbackFunctionName,4)){var h="",i="",j="",k="";if(a instanceof MLngLat||a.lngX&&a.latY){h=a.lngX;i=a.latY}if(d!=null)if(d instanceof MLngLat||d.lngX&&d.latY){j=d.lngX;k=d.latY}a=this.serverUrl;a+="&config=RGC&resType="+e+"&x1="+
h+"&y1="+i+"&x2="+j+"&y2="+k+"&cr="+f+"&a_k="+c+"&ver="+g+"&flag="+b;c=new MAjaxRequest;if(a.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{c.setResponseHandler(this.callbackFunctionName,this);c.sendRequest(a,null,null,null)}}}}};MCoordinateSearch.prototype.pathCorrection=function(a,d,b,c){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var e;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);
return}if(isAccess(this.callbackFunctionName))return;e=getMASAValidateKey()}else{e=MSISGetKey("asaCore.js");if(e==undefined)e=""}if(!MSISCheckError.judgeMLngLat(a,this.callbackFunctionName,"poiXY")){if(c==null||c==undefined||c=="")c=new MCoordinateSearchOptions;var f=c.resType,g=c.angle,h=c.range,i=c.flag;b=MSISCheckError.treatCityCodes(b);if(MSISCheckError.judgeParameter(b,"string","city",this.callbackFunctionName,7))if(MSISCheckError.judgeParameter(g,"number","angle",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(h,
"number","range",this.callbackFunctionName,4)){b=encodeURI(b);var j="",k="";if(a instanceof MLngLat||a.lngX&&a.latY){j=a.lngX;k=a.latY}var l=this.serverUrl;l+="&config=RGCR&cr=0&x1="+j+"&y1="+k+"&radian="+d+"&cityCode="+b+"&enc=utf-8&resType="+f+"&range="+h+"&flag="+i+"&angle="+g+"&a_k="+e;var n=new MAjaxRequest;if(l.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{n.setResponseHandler(this.callbackFunctionName,this);if(c.requestMethod.toLowerCase()=="get")n.sendRequest(l,null,null,
null);else if(c.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){n.sendPostRequest(l,null,null,null)});else if(!isIE())if(true){a=false;setTimeout(function(){n.sendPostRequest(l,null,null,null)},300)}else n.sendPostRequest(l,null,null,null)}}}}}};MCoordinateSearch.prototype.fromLngLatToPixel=function(a,d,b,c,e){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var f;if(MNoCheckKeyFlag){if(mValue_==
-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;f=getMASAValidateKey()}else{f=MSISGetKey("asaCore.js");if(f==undefined)f=""}var g="",h="";if(!MSISCheckError.judgeMLngLats(a,this.callbackFunctionName,"multiXY")){if(a instanceof MLngLats||a.lnglatArr){a=a.lnglatArr;for(var i=0;i<a.length;i++){var j=a[i];if(j instanceof MLngLat||j.lngX&&j.latY)if(i==a.length-1){g+=j.lngX;h+=j.latY}else{g+=j.lngX+",";h+=j.latY+","}}}i=a="";if(!MSISCheckError.judgeMLngLat(d,
this.callbackFunctionName,"centerPoiXY")){if(d instanceof MLngLat||d.lngX&&d.latY){a+=d.lngX;i+=d.latY}j=d=0;if(c instanceof MSize||c.width&&c.height){d=c.width;j=c.height}if(MSISCheckError.judgeParameter(b,"number","zoom",this.callbackFunctionName,7)){if(e==null||e==undefined||e=="")e=new MCoordinateSearchOptions;var k=this.serverUrl;k+="&config=PLL&enc=utf-8&resType="+e.resType+"&xs="+g+"&ys="+h+"&zoom="+b+"&width="+d+"&height="+j+"&centerLng="+a+"&centerLat="+i+"&a_k="+f;var l=new MAjaxRequest;
l.setResponseHandler(this.callbackFunctionName,this);if(e.requestMethod.toLowerCase()=="get")l.sendRequest(k,null,null,null);else if(e.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){l.sendPostRequest(k,null,null,null)});else if(!isIE())if(true){b=false;setTimeout(function(){l.sendPostRequest(k,null,null,null)},300)}else l.sendPostRequest(k,null,null,null)}}}}}};MCoordinateSearch.prototype.fromPixelToLngLat=function(a,d,b,c,e){if(this.callbackFunctionName==null||this.callbackFunctionName==
undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var f;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;f=getMASAValidateKey()}else{f=MSISGetKey("asaCore.js");if(f==undefined)f=""}for(var g="",h="",i=0;i<a.length;i++){var j=a[i];if(j instanceof MPoint||j.x&&j.y)if(i==a.length-1){g+=j.x;h+=j.y}else{g+=j.x+",";h+=j.y+","}}i=a="";if(!MSISCheckError.judgeMLngLat(d,this.callbackFunctionName,"centerPoiXY")){if(d instanceof
MLngLat||d.lngX&&d.latY){a+=d.lngX;i+=d.latY}j=d=0;if(c instanceof MSize||c.width&&c.height){d=c.width;j=c.height}if(MSISCheckError.judgeParameter(b,"number","zoom",this.callbackFunctionName,7)){if(e==null||e==undefined||e=="")e=new MCoordinateSearchOptions;var k=this.serverUrl;k+="&config=PLL&enc=utf-8&resType="+e.resType+"&screenXs="+g+"&screenYs="+h+"&zoom="+b+"&width="+d+"&height="+j+"&centerLng="+a+"&centerLat="+i+"&a_k="+f;var l=new MAjaxRequest;l.setResponseHandler(this.callbackFunctionName,
this);if(e.requestMethod.toLowerCase()=="get")l.sendRequest(k,null,null,null);else if(e.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){l.sendPostRequest(k,null,null,null)});else if(!isIE())if(true){b=false;setTimeout(function(){l.sendPostRequest(k,null,null,null)},300)}else l.sendPostRequest(k,null,null,null)}}}}};MCoordinateSearch.prototype.rarefying=function(a,d,b){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");
else{var c;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;c=getMASAValidateKey()}else{c=MSISGetKey("asaCore.js");if(c==undefined)c=""}var e="";if(!MSISCheckError.judgeMLngLats(a,this.callbackFunctionName,"coor")){if(a instanceof MLngLats||a.lnglatArr){a=a.lnglatArr;for(var f=0;f<a.length;f++)e+=a[f].lngX+","+a[f].latY+","}if(MSISCheckError.judgeParameter(d,"string","get",this.callbackFunctionName,7)){if(b==null||b==undefined||
b=="")b=new MCoordinateSearchOptions;a=b.resType;f=b.zoom;if(MSISCheckError.judgeParameter(f,"number","zoom",this.callbackFunctionName,4)){var g=this.serverUrl;g+="&config=VACUATE&get="+d+"&zoom="+f+"&xys="+e+"&a_k="+c+"&resType="+a;var h=new MAjaxRequest;h.setResponseHandler(this.callbackFunctionName,this);if(b.requestMethod.toLowerCase()=="get")h.sendRequest(g,null,null,null);else if(b.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){h.sendPostRequest(g,null,null,null)});
else if(!isIE())if(true){d=false;setTimeout(function(){h.sendPostRequest(g,null,null,null)},300)}else h.sendPostRequest(g,null,null,null)}}}}}}}
if(typeof MCoordinateSearchOptions=="undefined"){MCoordinateSearchOptions=function(){};MCoordinateSearchOptions.prototype.resType="json";MCoordinateSearchOptions.prototype.enc="utf-8";MCoordinateSearchOptions.prototype.angle=70;MCoordinateSearchOptions.prototype.range=300;MCoordinateSearchOptions.prototype.cr=0;MCoordinateSearchOptions.prototype.flag=false;MCoordinateSearchOptions.prototype.requestMethod="get";MCoordinateSearchOptions.prototype.ver=1;MCoordinateSearchOptions.prototype.zoom=17}
if(typeof MTrafficSearch=="undefined"){MTrafficSearch=function(){if(MNoCheckKeyFlag){var a=MSISGetKey("asaCore.js");MSearchDummy.availabilityKey(a,false,1)}};MTrafficSearch.prototype.callbackFunctionName=null;MTrafficSearch.prototype.serverUrl=MSISServerAddress+"highLight=false";MTrafficSearch.prototype.setCallbackFunction=function(a){this.callbackFunctionName=a};MTrafficSearch.prototype.trafficSearchByRoadName=function(a,d,b){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");
else{var c;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;c=getMASAValidateKey()}else{c=MSISGetKey("asaCore.js");if(c==undefined)c=""}if(b==null||b==undefined||b=="")b=new MTrafficSearchOptions;var e=b.resType;d=MSISCheckError.treatCityCodes(d);if(MSISCheckError.judgeParameter(a,"string","roadName",this.callbackFunctionName,7))if(MSISCheckError.judgeParameter(d,"string","city",this.callbackFunctionName,7)){d=encodeURI(d);
a=encodeURI(a);var f=this.serverUrl;f+="&config=ROAD&searchName="+a+"&cityCode="+d+"&enc=utf-8&resType="+e+"&a_k="+c;var g=new MAjaxRequest;if(f.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{g.setResponseHandler(this.callbackFunctionName,this);if(b.requestMethod.toLowerCase()=="get")g.sendRequest(f,null,null,null);else if(b.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){g.sendPostRequest(f,null,null,null)});else if(!isIE())if(true){a=false;setTimeout(function(){g.sendPostRequest(f,
null,null,null)},300)}else g.sendPostRequest(f,null,null,null)}}}}};MTrafficSearch.prototype.trafficSearchByTowRoadCross=function(a,d,b,c,e){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var f;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;f=getMASAValidateKey()}else{f=MSISGetKey("asaCore.js");if(f==undefined)f=""}if(e==null||
e==undefined||e=="")e=new MTrafficSearchOptions;if(MSISCheckError.judgeParameter(a,"string","roadName",this.callbackFunctionName,7))if(MSISCheckError.judgeParameter(c,"string","city",this.callbackFunctionName,7))if(MSISCheckError.judgeParameter(d,"string","startRoadName",this.callbackFunctionName,7))if(MSISCheckError.judgeParameter(b,"string","endRoadName",this.callbackFunctionName,7)){a=encodeURI(a);d=encodeURI(d);b=encodeURI(b);c=MSISCheckError.treatCityCodes(c);c=encodeURI(c);var g=this.serverUrl;
g+="&config=ROADCROSS&searchName="+a+"&cityCode="+c+"&firstName="+d+"&endName="+b+"&enc=utf-8&resType="+e.resType+"&a_k="+f;var h=new MAjaxRequest;if(g.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{h.setResponseHandler(this.callbackFunctionName,this);if(e.requestMethod.toLowerCase()=="get")h.sendRequest(g,null,null,null);else if(e.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){h.sendPostRequest(g,null,null,null)});else if(!isIE())if(true){a=false;setTimeout(function(){h.sendPostRequest(g,
null,null,null)},300)}else h.sendPostRequest(g,null,null,null)}}}}};MTrafficSearch.prototype.trafficSearchByCenPoi=function(a,d,b){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var c;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;c=getMASAValidateKey()}else{c=MSISGetKey("asaCore.js");if(c==undefined)c=""}if(b==null||b==undefined||
b=="")b=new MTrafficSearchOptions;var e="",f="";if(!MSISCheckError.judgeMLngLat(a,this.callbackFunctionName,"cenPoiXY")){d=MSISCheckError.treatCityCodes(d);if(MSISCheckError.judgeParameter(d,"string","city",this.callbackFunctionName,7)){if(a instanceof MLngLat||a.lngX&&a.latY){e=a.lngX;f=a.latY}d=encodeURI(d);var g=this.serverUrl;g+="&config=CIRCLEROAD&ver=2.0&cityCode="+d+"&cenX="+e+"&cenY="+f+"&enc=utf-8&resType="+b.resType+"&range="+b.range+"&a_k="+c;var h=new MAjaxRequest;if(g.length+35>=2048)checkUrlLength(this.callbackFunctionName);
else{h.setResponseHandler(this.callbackFunctionName,this);if(b.requestMethod.toLowerCase()=="get")h.sendRequest(g,null,null,null);else if(b.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){h.sendPostRequest(g,null,null,null)});else if(!isIE())if(true){a=false;setTimeout(function(){h.sendPostRequest(g,null,null,null)},300)}else h.sendPostRequest(g,null,null,null)}}}}}};MTrafficSearch.prototype.trafficSearchByRectangle=function(a,d,b){if(this.callbackFunctionName==null||
this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var c;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;c=getMASAValidateKey()}else{c=MSISGetKey("asaCore.js");if(c==undefined)c=""}if(b==null||b==undefined||b=="")b=new MTrafficSearchOptions;var e="",f="",g="",h="";if(!MSISCheckError.judgeMLngLats(a,this.callbackFunctionName,"bounds")){d=MSISCheckError.treatCityCodes(d);
if(MSISCheckError.judgeParameter(d,"string","city",this.callbackFunctionName,7)){if(a instanceof MLngLats||a.lnglatArr){a=a.lnglatArr;if(a[0]instanceof MLngLat){f=a[0];e=f.lngX;f=f.latY}if(a[1]instanceof MLngLat){h=a[1];g=h.lngX;h=h.latY}}d=encodeURI(d);var i=this.serverUrl;i+="&config=RECTANGLEROAD&cityCode="+d+"&x1="+e+"&y1="+f+"&x2="+g+"&y2="+h+"&enc=utf-8&resType="+b.resType+"&a_k="+c;var j=new MAjaxRequest;if(i.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{j.setResponseHandler(this.callbackFunctionName,
this);if(b.requestMethod.toLowerCase()=="get")j.sendRequest(i,null,null,null);else if(b.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){j.sendPostRequest(i,null,null,null)});else if(!isIE())if(true){d=false;setTimeout(function(){j.sendPostRequest(i,null,null,null)},300)}else j.sendPostRequest(i,null,null,null)}}}}}}}
if(typeof MTrafficSearchOptions=="undefined"){MTrafficSearchOptions=function(){};MTrafficSearchOptions.prototype.resType="json";MTrafficSearchOptions.prototype.enc="utf-8";MTrafficSearchOptions.prototype.range=1E3;MTrafficSearchOptions.prototype.requestMethod="get"}
if(typeof MWeatherSearch=="undefined"){MWeatherSearch=function(){if(MNoCheckKeyFlag){var a=MSISGetKey("asaCore.js");MSearchDummy.availabilityKey(a,false,1)}};MWeatherSearch.prototype.serverUrl=MSISServerAddress+"highLight=false&enc=utf-8";MWeatherSearch.prototype.callbackFunctionName=null;MWeatherSearch.prototype.setCallbackFunction=function(a){this.callbackFunctionName=a};MWeatherSearch.prototype.weatherSearchByCityCodes=function(a,d){d||(d=new MWeatherSearchOptions);var b=new MSearchTools(1),c=
new MSearchToolsOptions;c.resType=d.returnType;c.requestMethod=d.requestMethod;b.setCallbackFunction(this.callbackFunctionName);b.weatherSearchByCity(a,c)};MWeatherSearch.prototype.weatherSearchByPoiXY=function(a,d){d||(d=new MWeatherSearchOptions);var b=new MSearchTools(1),c=new MSearchToolsOptions;c.resType=d.returnType;c.requestMethod=d.requestMethod;b.setCallbackFunction(this.callbackFunctionName);b.weatherSearchByPoi(a,c)}}
if(typeof MWeatherSearchOptions=="undefined"){MWeatherSearchOptions=function(){};MWeatherSearchOptions.prototype.returnType="JSON";MWeatherSearchOptions.prototype.requestMethod="get"}
if(typeof MDistrictSearch=="undefined"){MDistrictSearch=function(){if(MNoCheckKeyFlag){var a=MSISGetKey("asaCore.js");MSearchDummy.availabilityKey(a,false,1)}};MDistrictSearch.prototype.serverUrl=MSISServerAddress+"highLight=false&enc=utf-8&ver=2.0";MDistrictSearch.prototype.callbackFunctionName=null;MDistrictSearch.PROVINCE="province";MDistrictSearch.CITY="city";MDistrictSearch.DISTRICT="district";MDistrictSearch.prototype.setCallbackFunction=function(a){this.callbackFunctionName=a};MDistrictSearch.prototype.districtSearchByNameAndCode=
function(a,d,b,c){c||(c=new MDistrictSearchOptions);var e=new MSearchTools(1),f=new MSearchToolsOptions;f.resType=c.returnType;f.requestMethod=c.requestMethod;e.setCallbackFunction(this.callbackFunctionName);e.districtSearchByNameAndCode(b,a,d,f)};MDistrictSearch.prototype.districtSearchByPoiXYAndZoom=function(a,d,b){b||(b=new MDistrictSearchOptions);var c=new MSearchTools(1),e=new MSearchToolsOptions;e.resType=b.returnType;e.requestMethod=b.requestMethod;c.setCallbackFunction(this.callbackFunctionName);
c.districtSearchByPoiAndZoom(a,d,e)}}if(typeof MDistrictSearchOptions=="undefined"){MDistrictSearchOptions=function(){};MDistrictSearchOptions.prototype.returnType="JSON";MDistrictSearchOptions.prototype.requestMethod="get"}
if(typeof MSearchTools=="undefined"){MSearchTools=function(a){if(msisFlag=a==1?false:true)if(MNoCheckKeyFlag){a=MSISGetKey("asaCore.js");MSearchDummy.availabilityKey(a,false,1)}};MSearchTools.prototype.callbackFunctionName=null;MSearchTools.prototype.serverUrl=MSISServerAddress+"highLight=false&enc=utf-8";MSearchTools.prototype.setCallbackFunction=function(a){this.callbackFunctionName=a};MSearchTools.prototype.weatherSearchByAdCode=function(a,d){if(this.callbackFunctionName==null||this.callbackFunctionName==
undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var b;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;b=getMASAValidateKey()}else{b=MSISGetKey("asaCore.js");if(b==undefined)b=""}if(d==null||d==undefined||d=="")d=new MSearchToolsOptions;if(typeof a=="number")a=""+a;if(MSISCheckError.judgeParameter(a,"string","adCode",this.callbackFunctionName,7)){a=encodeURI(a);var c=d.resType,e=d.ver;if(MSISCheckError.judgeParameter(e,
"string","ver",this.callbackFunctionName,6)){var f=this.serverUrl;f+="&config=WEATHER&adCode="+a+"&enc=utf-8&resType="+c+"&a_k="+b+"&ver="+e;var g=new MAjaxRequest;if(f.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{g.setResponseHandler(this.callbackFunctionName,this);if(d.requestMethod.toLowerCase()=="get")g.sendRequest(f,null,null,null);else if(d.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){g.sendPostRequest(f,null,null,null)});else if(!isIE())if(true){b=
false;setTimeout(function(){g.sendPostRequest(f,null,null,null)},300)}else g.sendPostRequest(f,null,null,null)}}}}}};MSearchTools.prototype.weatherSearchByCity=function(a,d){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var b;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;b=getMASAValidateKey()}else{b=MSISGetKey("asaCore.js");
if(b==undefined)b=""}if(d==null||d==undefined||d=="")d=new MSearchToolsOptions;a=MSISCheckError.treatCityCodes(a);if(MSISCheckError.judgeParameter(a,"string","city",this.callbackFunctionName,7)){a=encodeURI(a);var c=d.resType,e=d.ver;if(MSISCheckError.judgeParameter(e,"string","ver",this.callbackFunctionName,6)){var f=this.serverUrl;f+="&config=WEATHER&cityCode="+a+"&enc=utf-8&resType="+c+"&a_k="+b+"&ver="+e;var g=new MAjaxRequest;if(f.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{g.setResponseHandler(this.callbackFunctionName,
this);if(d.requestMethod.toLowerCase()=="get")g.sendRequest(f,null,null,null);else if(d.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){g.sendPostRequest(f,null,null,null)});else if(!isIE())if(true){b=false;setTimeout(function(){g.sendPostRequest(f,null,null,null)},300)}else g.sendPostRequest(f,null,null,null)}}}}}};MSearchTools.prototype.weatherSearchByPoi=function(a,d){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");
else{var b;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;b=getMASAValidateKey()}else{b=MSISGetKey("asaCore.js");if(b==undefined)b=""}if(d==null||d==undefined||d=="")d=new MSearchToolsOptions;var c="",e="";if(!MSISCheckError.judgeMLngLat(a,this.callbackFunctionName,"poiXY")){if(a instanceof MLngLat||a.lngX&&a.latY){c=a.lngX;e=a.latY}var f=d.resType,g=d.ver;if(MSISCheckError.judgeParameter(g,"string","ver",this.callbackFunctionName,
6)){var h=this.serverUrl;h+="&config=SWEATHER&ver=2.0&x1="+c+"&y1="+e+"&enc=utf-8&resType="+f+"&a_k="+b+"&ver="+g;var i=new MAjaxRequest;if(h.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{i.setResponseHandler(this.callbackFunctionName,this);if(d.requestMethod.toLowerCase()=="get")i.sendRequest(h,null,null,null);else if(d.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){i.sendPostRequest(h,null,null,null)});else if(!isIE())if(true){b=false;setTimeout(function(){i.sendPostRequest(h,
null,null,null)},300)}else i.sendPostRequest(h,null,null,null)}}}}}};MSearchTools.prototype.addressSearchByIP=function(a,d){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var b;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;b=getMASAValidateKey()}else{b=MSISGetKey("asaCore.js");if(b==undefined)b=""}if(d==null||d==undefined||
d=="")d=new MSearchToolsOptions;var c=d.resType;if(MSISCheckError.judgeParameter(a,"string","ip",this.callbackFunctionName,7)){var e=this.serverUrl;e+="&config=IPS&ip="+a+"&enc=utf-8&resType="+c+"&a_k="+b;var f=new MAjaxRequest;if(e.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{f.setResponseHandler(this.callbackFunctionName,this);if(d.requestMethod.toLowerCase()=="get")f.sendRequest(e,null,null,null);else if(d.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){f.sendPostRequest(e,
null,null,null)});else if(!isIE())if(true){b=false;setTimeout(function(){f.sendPostRequest(e,null,null,null)},300)}else f.sendPostRequest(e,null,null,null)}}}}};MSearchTools.prototype.cityInfoSearchByCity=function(a,d){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var b;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;b=getMASAValidateKey()}else{b=
MSISGetKey("asaCore.js");if(b==undefined)b=""}if(d==null||d==undefined||d=="")d=new MSearchToolsOptions;a=MSISCheckError.treatCityCodes(a);if(MSISCheckError.judgeParameter(a,"string","city",this.callbackFunctionName,7)){a=encodeURI(a);var c=this.serverUrl;c+="&config=CITY&cityCodes="+a+"&enc=utf-8&resType="+d.resType+"&a_k="+b;var e=new MAjaxRequest;if(c.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{e.setResponseHandler(this.callbackFunctionName,this);if(d.requestMethod.toLowerCase()==
"get")e.sendRequest(c,null,null,null);else if(d.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){e.sendPostRequest(c,null,null,null)});else if(!isIE())if(true){b=false;setTimeout(function(){e.sendPostRequest(c,null,null,null)},300)}else e.sendPostRequest(c,null,null,null)}}}}};MSearchTools.prototype.districtSearchByNameAndCode=function(a,d,b,c){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");
else{var e;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;e=getMASAValidateKey()}else{e=MSISGetKey("asaCore.js");if(e==undefined)e=""}if(c==null||c==undefined||c=="")c=new MSearchToolsOptions;if(typeof b=="number")b=""+b;if(a==null||a==undefined||a=="")a="district";if(MSISCheckError.judgeParameter(a,"string","searchType",this.callbackFunctionName,6))if(MSISCheckError.judgeParameter(d,"string","name",this.callbackFunctionName,
7))if(MSISCheckError.judgeParameter(b,"string","code",this.callbackFunctionName,7)){d=encodeURI(d);var f=this.serverUrl;f+="&config=ASEARCH&searchType="+a+"&searchName="+d+"&code="+b+"&enc=utf-8&resType="+c.resType+"&a_k="+e;var g=new MAjaxRequest;if(f.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{g.setResponseHandler(this.callbackFunctionName,this);if(c.requestMethod.toLowerCase()=="get")g.sendRequest(f,null,null,null);else if(c.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){g.sendPostRequest(f,
null,null,null)});else if(!isIE())if(true){a=false;setTimeout(function(){g.sendPostRequest(f,null,null,null)},300)}else g.sendPostRequest(f,null,null,null)}}}}};MSearchTools.prototype.districtSearchByPoiAndZoom=function(a,d,b){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var c;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;
c=getMASAValidateKey()}else{c=MSISGetKey("asaCore.js");if(c==undefined)c=""}if(b==null||b==undefined||b=="")b=new MSearchToolsOptions;var e="",f="";if(!MSISCheckError.judgeMLngLat(a,this.callbackFunctionName,"poiXY")){if(a instanceof MLngLat||a.lngX&&a.latY){e=a.lngX;f=a.latY}var g=this.serverUrl;g+="&config=PSEARCH&x1="+e+"&y1="+f+"&maplevel="+d+"&enc=utf-8&resType="+b.resType+"&a_k="+c;var h=new MAjaxRequest;if(g.length+35>=2048)checkUrlLength(this.callbackFunctionName);else{h.setResponseHandler(this.callbackFunctionName,
this);if(b.requestMethod.toLowerCase()=="get")h.sendRequest(g,null,null,null);else if(b.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){h.sendPostRequest(g,null,null,null)});else if(!isIE())if(true){a=false;setTimeout(function(){h.sendPostRequest(g,null,null,null)},300)}else h.sendPostRequest(g,null,null,null)}}}}};MSearchTools.prototype.multiPoiRouteSearch=function(a){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");
else{if(typeof a=="number")a=""+a;if(MSISCheckError.judgeParameter(a,"string","date",this.callbackFunctionName,7)){a="http://ubas.test.mapabc.com/mpr?date="+a;var d=new MAjaxRequest;d.setResponseHandler(this.callbackFunctionName,this);d.sendRequest(a,null,null,null)}}}}
if(typeof MSearchToolsOptions=="undefined"){MSearchToolsOptions=function(){};MSearchToolsOptions.prototype.resType="json";MSearchToolsOptions.prototype.enc="utf-8";MSearchToolsOptions.prototype.requestMethod="get";MSearchToolsOptions.prototype.ver="1.0"}
if(typeof MDynamicRendering=="undefined"){MDynamicRendering=function(a){if(msisFlag=a==1?false:true)if(MNoCheckKeyFlag){a=MSISGetKey("asaCore.js");MSearchDummy.availabilityKey(a,false,1)}};MDynamicRendering.prototype.callbackFunctionName=null;MDynamicRendering.prototype.serverUrl=MSISServerAddress+"highLight=false";MDynamicRendering.prototype.setCallbackFunction=function(a){this.callbackFunctionName=a};MDynamicRendering.prototype.poiSearchByPoiId=function(a,d,b){if(this.callbackFunctionName==null||
this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var c;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;c=getMASAValidateKey()}else{c=MSISGetKey("asaCore.js");if(c==undefined)c=""}if(b==null||b==undefined||b=="")b=new MDynamicRenderingOptions;var e=b.resType;if(MSISCheckError.judgeParameter(a,"string","poiId",this.callbackFunctionName,7))if(MSISCheckError.judgeParameter(d,
"string","layer",this.callbackFunctionName,7)){var f=this.serverUrl;f+="&config=QUERYBYID&layer="+d+"&id="+a+"&a_k="+c+"&resType="+e+"&enc=utf-8";var g=new MAjaxRequest;g.setResponseHandler(this.callbackFunctionName,this);if(b.requestMethod.toLowerCase()=="get")g.sendRequest(f,null,null,null);else if(b.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){g.sendPostRequest(f,null,null,null)});else if(!isIE())if(true){a=false;setTimeout(function(){g.sendPostRequest(f,null,
null,null)},300)}else g.sendPostRequest(f,null,null,null)}}}};MDynamicRendering.prototype.poiSearchByCenPoi=function(a,d,b){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var c;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;c=getMASAValidateKey()}else{c=MSISGetKey("asaCore.js");if(c==undefined)c=""}if(b==null||b==undefined||
b=="")b=new MDynamicRenderingOptions;var e=b.resType,f=b.range,g=a.lngX+"";a=a.latY+"";if(MSISCheckError.judgeParameter(g,"string","centerPoiXY",this.callbackFunctionName,7))if(MSISCheckError.judgeParameter(a,"string","centerPoiXY",this.callbackFunctionName,7))if(MSISCheckError.judgeParameter(f,"number","range",this.callbackFunctionName,4))if(MSISCheckError.judgeParameter(d,"string","layer",this.callbackFunctionName,7)){var h=this.serverUrl;h+="&config=QUERYBYCENTER&layer="+d+"&cenX="+g+"&cenY="+
a+"&range="+f+"&a_k="+c+"&resType="+e+"&enc=utf-8";var i=new MAjaxRequest;i.setResponseHandler(this.callbackFunctionName,this);if(b.requestMethod.toLowerCase()=="get")i.sendRequest(h,null,null,null);else if(b.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){i.sendPostRequest(h,null,null,null)});else if(!isIE())if(true){d=false;setTimeout(function(){i.sendPostRequest(h,null,null,null)},300)}else i.sendPostRequest(h,null,null,null)}}}};MDynamicRendering.prototype.spatialSearchByRegion=
function(a,d,b){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var c;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;c=getMASAValidateKey()}else{c=MSISGetKey("asaCore.js");if(c==undefined)c=""}if(b==null||b==undefined||b=="")b=new MDynamicRenderingOptions;var e=b.resType,f="";if(a instanceof MLngLats||a.lnglatArr){a=a.lnglatArr;
for(var g=0;g<a.length;g++)if(a[g]instanceof MLngLat||a[g].lngX&&a[g].latY){var h=a[g];h=[h.lngX,h.latY].join(",");f+=g==a.length-1?h:h+","}}if(MSISCheckError.judgeParameter(f,"string","xys",this.callbackFunctionName,1))if(MSISCheckError.judgeParameter(d,"string","layer",this.callbackFunctionName,7)){var i=this.serverUrl;i+="&config=QUERYBYPOLYGON&layer="+d+"&xys="+f+"&a_k="+c+"&resType="+e+"&enc=utf-8";var j=new MAjaxRequest;j.setResponseHandler(this.callbackFunctionName,this);if(b.requestMethod.toLowerCase()==
"get")j.sendRequest(i,null,null,null);else if(b.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){j.sendPostRequest(i,null,null,null)});else if(!isIE())if(true){d=false;setTimeout(function(){j.sendPostRequest(i,null,null,null)},300)}else j.sendPostRequest(i,null,null,null)}}}};MDynamicRendering.prototype.spatialSearchByPoi=function(a,d,b){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");
else{var c;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;c=getMASAValidateKey()}else{c=MSISGetKey("asaCore.js");if(c==undefined)c=""}if(b==null||b==undefined||b=="")b=new MDynamicRenderingOptions;var e=a.lngX+"";a=a.latY+"";if(MSISCheckError.judgeParameter(e,"string","poiXY",this.callbackFunctionName,7))if(MSISCheckError.judgeParameter(a,"string","poiXY",this.callbackFunctionName,7))if(MSISCheckError.judgeParameter(d,
"string","layer",this.callbackFunctionName,7)){var f=this.serverUrl;f+="&config=QUERYGEOMETRY&layer="+d+"&x="+e+"&y="+a+"&a_k="+c+"&resType="+b.resType;var g=new MAjaxRequest;g.setResponseHandler(this.callbackFunctionName,this);if(b.requestMethod.toLowerCase()=="get")g.sendRequest(f,null,null,null);else if(b.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){g.sendPostRequest(f,null,null,null)});else if(!isIE())if(true){d=false;setTimeout(function(){g.sendPostRequest(f,
null,null,null)},300)}else g.sendPostRequest(f,null,null,null)}}}}}if(typeof MDynamicRenderingOptions=="undefined"){MDynamicRenderingOptions=function(){};MDynamicRenderingOptions.prototype.resType="JSON";MDynamicRenderingOptions.prototype.range=5E3;MDynamicRenderingOptions.prototype.requestMethod="get"}
if(typeof MToolsSearch=="undefined"){MToolsSearch=function(){};MToolsSearch.prototype.serverUrl=MSISServerAddress+"highLight=false&enc=utf-8&ver=2.0";MToolsSearch.prototype.callbackFunctionName=null;MToolsSearch.prototype.setCallbackFunction=function(a){MToolsSearch.prototype.callbackFunctionName=a};MToolsSearch.prototype.GPSToOffset=function(a,d){var b=this;setTimeout(function(){if(b.callbackFunctionName==null||b.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");
else{var c="",e="";if(a.lngX&&a.latY){c=a.lngX+"";e=a.latY+""}var f;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(b.callbackFunctionName);return}if(isAccess(b.callbackFunctionName))return;f=getMASAValidateKey()}else{f=MSISGetKey("asaCore.js");if(f==undefined)f=""}d||(d=new MToolsSearchOptions);var g=d.returnType;if(MSISCheckError.judgeParameter(c,"string","poiXY",b.callbackFunctionName,7))if(MSISCheckError.judgeParameter(e,"string","poiXY",b.callbackFunctionName,7))if(MSISCheckError.judgeParameter(g,
"string","returnType",b.callbackFunctionName,6)){var h=b.serverUrl;h+="flag=ture&config=RGC&x1="+c+"&y1="+e+"&cr=0&resType="+g+"&a_k="+f;c=new MAjaxRequest;if(h.length+35>=2048)checkUrlLength(b.callbackFunctionName);else{c.setResponseHandler(b.callbackFunctionName,b);c.sendRequest(h,"","","")}}}})}}if(typeof MToolsSearchOptions=="undefined")MToolsSearchOptions=function(){MToolsSearchOptions.prototype.returnType="JSON"};
if(typeof MEconomySearch=="undefined"){MEconomySearch=function(){if(MNoCheckKeyFlag){var a=MSISGetKey("asaCore.js");MSearchDummy.availabilityKey(a,false,1)}};MEconomySearch.prototype.callbackFunctionName=null;MEconomySearch.prototype.serverUrl=MSISServerAddress+"highLight=false";MEconomySearch.prototype.setCallbackFunction=function(a){this.callbackFunctionName=a};MEconomySearch.prototype.reachRangeSearchBySpeedAndTime=function(a,d,b,c){if(this.callbackFunctionName==null||this.callbackFunctionName==
undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var e;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);return}if(isAccess(this.callbackFunctionName))return;e=getMASAValidateKey()}else{e=MSISGetKey("asaCore.js");if(e==undefined)e=""}if(c==null||c==undefined||c=="")c=new MEconomySearchOptions;var f="",g="";if(a.lngX&&a.latY){f=a.lngX+"";g=a.latY+""}if(MSISCheckError.judgeParameter(f,"string","cenXY",this.callbackFunctionName,7))if(MSISCheckError.judgeParameter(g,
"string","cenXY",this.callbackFunctionName,7))if(MSISCheckError.judgeParameter(d,"number","speed",this.callbackFunctionName,7))if(MSISCheckError.judgeParameter(b,"number","time",this.callbackFunctionName,7)){var h=this.serverUrl;h+="&config=TIMEREACHRANGE&cenX="+f+"&cenY="+g+"&speed="+d+"&time="+b+"&a_k="+e+"&resType="+c.resType+"&enc=utf-8";var i=new MAjaxRequest;i.setResponseHandler(this.callbackFunctionName,this);if(c.requestMethod.toLowerCase()=="get")i.sendRequest(h,null,null,null);else if(c.requestMethod.toLowerCase()==
"post"){initFP_();if(isIE())setTimeout(function(){i.sendPostRequest(h,null,null,null)});else if(!isIE())if(true){a=false;setTimeout(function(){i.sendPostRequest(h,null,null,null)},300)}else i.sendPostRequest(h,null,null,null)}}}};MEconomySearch.prototype.gridSearchByRegion=function(a,d){if(this.callbackFunctionName==null||this.callbackFunctionName==undefined)alert("\u8bf7\u4f20\u5165\u56de\u8c03\u65b9\u6cd5\u540d\u79f0");else{var b;if(MNoCheckKeyFlag){if(mValue_==-1){checkWrong(this.callbackFunctionName);
return}if(isAccess(this.callbackFunctionName))return;b=getMASAValidateKey()}else{b=MSISGetKey("asaCore.js");if(b==undefined)b=""}if(d==null||d==undefined||d=="")d=new MEconomySearchOptions;if(!MSISCheckError.judgeMLngLats(a,this.callbackFunctionName,"multiPoiXY")){var c="";if(a instanceof MLngLats||a.lnglatArr)for(var e=a.lnglatArr,f=0;f<e.length;f++)if(e[f]instanceof MLngLat||e[f].lngX&&e[f].latY){var g=e[f];g=[g.lngX.toString(),g.latY.toString()].join(",");c+=f==e.length-1?g:g+";"}var h=this.serverUrl;
h+="&config=GRIDCELL&coors="+c+"&a_k="+b+"&resType="+d.resType+"&enc=utf-8";var i=new MAjaxRequest;i.setResponseHandler(this.callbackFunctionName,this);if(d.requestMethod.toLowerCase()=="get")i.sendRequest(h,null,null,null);else if(d.requestMethod.toLowerCase()=="post"){initFP_();if(isIE())setTimeout(function(){i.sendPostRequest(h,null,null,null)});else if(!isIE())if(true){b=false;setTimeout(function(){i.sendPostRequest(h,null,null,null)},300)}else i.sendPostRequest(h,null,null,null)}}}}}
if(typeof MEconomySearchOptions=="undefined")MEconomySearchOptions=function(){MEconomySearchOptions.prototype.resType="JSON";MEconomySearchOptions.prototype.requestMethod="get"};
